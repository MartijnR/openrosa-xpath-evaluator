!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("node-forge")):"function"==typeof define&&define.amd?define("orxe",["node-forge"],e):"object"==typeof exports?exports.orxe=e(require("node-forge")):t.orxe=e(t["node-forge"])}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";t.exports={DATE_STRING:/^\d\d\d\d-\d{1,2}-\d{1,2}(?:T\d\d:\d\d:\d\d\.?\d?\d?(?:Z|[+-]\d\d:\d\d)|.*)?$/,dateToDays:function(t,e){var n=null;t.indexOf("T")>0?n=new Date(t):(n=t.split("-"),n=new Date(n[0],n[1]-1,n[2]));var r=n.getTime()/864e5;return!1===e?r:Math.round(1e5*r)/1e5},isValidDate:function(t,e,n){return(e=parseInt(e,10)-1)>=0&&e<12&&n>0&&n<=function(t,e){switch(t){case 1:return e%4==0&&e%100||e%400==0?29:28;case 8:case 3:case 5:case 10:return 30;default:return 31}}(e,t)}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";t.exports={allowStringComparison:!1,includeTimeForTodayString:!1,returnCurrentTimeForToday:!1,returnEmptyStringForInvalidDate:!0}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";t.exports={getNamespaceAtts:function(t){for(var e,n=[];e=t.iterateNext();)e.name.indexOf(":")>0&&n.unshift(e);return n},toNodes:function(t){for(var e,n=[];e=t.iterateNext();)n.push(e);return n},toSnapshotResult:function(t,e,n){return r=0,{resultType:e,singleNodeValue:t.length?n||t[0]:null,snapshotLength:t.length,snapshotItem:function(e){return t[e]},iterateNext:function(){return t.length>r?t[r++]:null}};var r}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={nodes:function(t){return{t:"nodes",v:t}},boolean:function(t){return{t:"bool",v:t}},number:function(t){return{t:"num",v:t}},string:function(t){return{t:"str",v:t}},date:function(t){if(!(t instanceof Date))throw new Error("Cannot create date from "+t+" ("+e(t)+")");return{t:"date",v:t}}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";t.exports=n(5)})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";n(6);var e=n(7),r=n(13),o=n(1),a=r(o);function i(){var t=new XPathEvaluator;return{createExpression:t.createExpression,createNSResolver:t.createNSResolver,evaluate:function(n,r,o,i,u){var s=function(e,n,a){(i<7||e.startsWith("//"))&&(i=null);var s=a||i||XPathResult.ANY_TYPE;return t.evaluate(e,n||r,o,s||XPathResult.ANY_TYPE,u)},l=new e(s,a);return l.evaluate.apply(l,arguments)}}}t.exports=function(){var t={config:o,customXPathFunction:a.customXPathFunction,XPathEvaluator:i,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(t){return{document:{evaluate:new i(t).evaluate}}},bindDomLevel3XPath:function(e,n){var r,o=n||t.createDomLevel3XPathBindings(),a=t.getCurrentDomLevel3XPathBindings();for(r in e=e||document,o.document)e[r]=o.document[r];return a}};return t}()})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";Date.prototype.toISOLocalString=function(){if("Invalid Date"===this.toString())return this.toString();var t=new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime());return t.indexOf("T00:00:00.000")>0?t.split("T")[0]:t},Date.prototype.getTimezoneOffsetAsTime=function(){var t,e=function(t){return t<10?"0"+t:t};return"Invalid Date"===this.toString()?this.toString():((t=this.getTimezoneOffset())<0?"+":"-")+e(Math.floor(Math.abs(t/60)))+":"+e(Math.floor(Math.abs(t%60)))}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(1),r=n(8),o=n(9),a=o.isNamespaceExpr,i=o.handleNamespaceExpr,u=n(10).handleOperation,s=n(11),l=s.isNativeFunction,f=s.preprocessNativeArgs,v=n(0),c=v.DATE_STRING,h=v.dateToDays,g=n(2),d=g.toNodes,p=g.toSnapshotResult,m=n(12),b=m.inputArgs,T=m.preprocessInput,y=(n(3),[["|"],["&"],["=","!="],["<","<=",">=",">"],["+","-"],["*","/","%"]]),N=/[0-9]/,x=/^[a-z]/,w=/(>|<)/,E=/(=)/,P=/(true\(\)|false\(\))/,R=/(=|<|>)/,S=new Error("invalid args"),I=new Error("too many args"),M=new Error("too few args");t.exports=function(t,n){var o=n.func||{},s=n.process||{},v=function(t){var e,n;if(t.resultType===XPathResult.NUMBER_TYPE)return{t:"num",v:t.numberValue};if(t.resultType===XPathResult.BOOLEAN_TYPE)return{t:"bool",v:t.booleanValue};if(t.resultType===XPathResult.UNORDERED_NODE_ITERATOR_TYPE){for(n=[];e=t.iterateNext();)n.push(e.textContent);return{t:"arr",v:n}}return{t:"str",v:t.stringValue}},g=function(t,e,n){if(o.hasOwnProperty(t))return n&&/^(date|now$|today$|randomize$)/.test(t)&&e.push(n),/^(true$|false$)/.test(t)&&e.push(n||XPathResult.BOOLEAN_TYPE),m(t,e);if("normalize-space"===t&&e.length){var r=e[0].v;return{t:"str",v:r=(r=(r=(r=(r=(r=(r=r.replace(/\f/g,"\\f")).replace(/\r\v/g,"\v")).replace(/\v/g,"\\v")).replace(/\s+/g," ")).replace(/^\s+|\s+$/g,"")).replace(/\\v/g,"\v")).replace(/\\f/g,"\f")}}return"string"===t&&e.length>0&&(e[0].v===Number.POSITIVE_INFINITY||e[0].v===Number.NEGATIVE_INFINITY||e[0].v!=e[0].v)?{t:"str",v:e[0].v}:O(t,f(t,e))},m=function(t,e){var n,r=[];for(n=0;n<e.length;++n)r.push(e[n]);return o[t].apply(null,r)},O=function(e,n){var r,o,a,i="";for(a=0;a<n.length;++a)"num"!==(r=n[a]).t&&"bool"!==r.t&&(i+=o=-1===r.v.indexOf('"')?'"':"'"),i+=r.v,"bool"===r.t&&(i+="()"),"num"!==r.t&&"bool"!==r.t&&(i+=o),a<n.length-1&&(i+=", ");return v(t(e+"("+i+")"))},_=function(t){if(s.typefor){var e=s.typefor(t);if(e)return e}return"boolean"==typeof t?"bool":"number"==typeof t?"num":"str"};this.evaluate=function(n,o,f,m){if(n=T(n,m),a(n))return i(n,o);if(l(n)&&n.indexOf("[selected(")<0&&!(n.startsWith("/")&&n.indexOf(" ")>0)&&"/"!==n){var O=b(n);if(O.length&&O[0].length&&!isNaN(O[0]))throw S;if("lang()"===n)throw M;/^lang\(/.test(n)&&2===o.nodeType&&(o=o.ownerElement);var X=t(n,o);if(m===XPathResult.NUMBER_TYPE&&(X.resultType===XPathResult.UNORDERED_NODE_ITERATOR_TYPE||X.resultType===XPathResult.UNORDERED_NODE_ITERATOR_TYPE)){var D=parseInt(X.iterateNext().textContent);return{resultType:XPathResult.NUMBER_TYPE,numberValue:D,stringValue:D}}if(m===XPathResult.STRING_TYPE&&X.resultType===XPathResult.STRING_TYPE&&X.stringValue.startsWith("<xpath:"))return{resultType:XPathResult.STRING_TYPE,stringValue:X.stringValue.substring(7,X.stringValue.length-1)};if(m===XPathResult.STRING_TYPE&&X.resultType>=6){if(X.snapshotLength){var Y=X.snapshotItem(0);return{resultType:m,stringValue:Y.textContent}}return{resultType:m,stringValue:""}}if(m===XPathResult.STRING_TYPE&&X.resultType>=4){var k=(Y=X.iterateNext())?Y.textContent:"";return{resultType:m,stringValue:k}}return m===XPathResult.BOOLEAN_TYPE&&X.resultType>=4?(Y=X.iterateNext(),{resultType:m,booleanValue:!!Y}):m===XPathResult.STRING_TYPE&&X.resultType===XPathResult.NUMBER_TYPE?{resultType:m,stringValue:X.numberValue.toString()}:X}if(m>3&&!n.startsWith("randomize")||/^count\(|boolean\(/.test(n)){if(n.startsWith("count(")){if(n.indexOf(",")>0)throw I;if("count()"===n)throw M;if(!isNaN(/\((.*)\)/.exec(n)[1]))throw S}if(n.startsWith("boolean(")){if("boolean()"===n)throw M;if(n.substring(8,n.indexOf(")")).split(",").length>1)throw I}"/"===n&&(o=o.ownerDocument||o);var V=n.indexOf("[selected(");if(V>0){var A=n.substring(0,V),B=n.substring(V+10,n.indexOf(")]")).split(",").map((function(t){return t.trim()})),$=t("".concat(B[0],"/text()"));if($.snapshotLength){var F=$.snapshotItem(0).textContent.split(" ").map((function(t){return"".concat(B[1],'="').concat(t,'"')}));return t("".concat(A,"[").concat(F.join(" or "),"]"))}return p([],m)}var L=t(n,o,f,m);return m===XPathResult.STRING_TYPE&&L.resultType===XPathResult.NUMBER_TYPE?{type:XPathResult.STRING_TYPE,stringValue:xx.numberValue.toString()}:L}m===XPathResult.BOOLEAN_TYPE&&n.indexOf("(")<0&&n.indexOf("/")<0&&n.indexOf("=")<0&&n.indexOf("!=")<0&&(n=(n=(n=n.replace(/(\n|\r|\t)/g,"")).replace(/"(\d)"/g,"$1")).replace(/'(\d)'/g,"$1"),n="boolean-from-string(".concat(n,")")),m===XPathResult.NUMBER_TYPE&&n.indexOf("string-length")<0&&(n=n.replace(/(\n|\r|\t)/g,""));var U,G,C,j=[{t:"root",tokens:[]}],z=function(){return j[j.length-1]},q=function(t){throw new Error((t||"")+" [stack="+JSON.stringify(j)+"] [cur="+JSON.stringify(G)+"]")},W=function(){G={t:"?",v:""}},Z=function(t){z().tokens.push({t:"op",v:t}),W()},H=function(t,n){var r=function(t,n,r){if(s.handleInfix){var o=s.handleInfix(q,t,n,r);if(o&&"continue"===o.t&&(t=o.lhs,n=o.op,r=o.rhs,o=null),null!=o)return o}return u(t,n,r,e)}(t[n-1],t[n],t[n+1]);null!=r&&(t.splice(n,2),t[n-1]={t:_(r),v:r})},J=function(){var t,e,n,r;for(r=z().tokens,e=y.length-1;e>=0;--e)for(n=y[e],t=1;t<r.length-1;)"op"===r[t].t&&-1!==n.indexOf(r[t].v)?H(r,t):++t},K=function(e){var n,r=G.v;n=["position"].includes(z().v)?t(r):m>3||G.v.indexOf("position()=")>=0&&1===j.length&&!/^[a-z]*[(|[]{1}/.test(G.v)?d(t(r,o,e)):r.startsWith("$")?r:v(t(r,o,e)),z().tokens.push(n),W()},Q=function(){return n.charAt(U+1)},tt=function(){G.v=parseFloat(G.string),z().tokens.push(G),W()},et=function(t){return t>="0"&&t<="9"};for(W(),U=0;U<n.length;++U){var nt=n.charAt(U);if(G.sq)G.v+=nt,"]"===nt?--G.sq:"["===nt&&++G.sq;else if("str"!==G.t){if("num"===G.t){if(N.test(nt)||["e",'"',"'"].includes(nt)||"-"===nt&&"e"===n[U-1]){G.string+=nt;continue}if(" "===nt&&"-"===G.string)continue;"."!==nt||G.decimal?tt():(G.decimal=1,G.string+=nt)}if(et(nt))""===G.v?G={t:"num",string:nt}:G.v+=nt;else switch(nt){case"'":case'"':""===G.v?G={t:"str",quote:nt,v:""}:q("Not sure how to handle: "+nt);break;case"(":G.t="fn",G.tokens=[],j.push(G),"once"===G.v&&(W(),G.v=".",K()),W();break;case")":if("["===Q()){var rt=j.pop();rt.v=rt.v+"("+G.v+nt,rt.t="?",G=rt;break}var ot=n.startsWith("randomize")?4:null;if(""!==G.v&&K(ot),J(),"fn"!==(G=j.pop()).t&&q(),G.v){var at=m;m===XPathResult.BOOLEAN_TYPE&&(w.test(n)&&!P.test(n)&&(at=XPathResult.NUMBER_TYPE),E.test(n)&&(at=XPathResult.BOOLEAN_TYPE),R.test(n)&&"fn"===G.t&&/^(date|date-time)$/.test(G.v)&&(at=XPathResult.STRING_TYPE)),X=g(G.v,G.tokens,at),"node"===G.v&&"arr"===X.t&&X.v.length>0&&(X.v=[X.v[0]]),z().tokens.push(X)}else 1!==G.tokens.length&&q(),z().tokens.push(G.tokens[0]);W();break;case",":""!==G.v&&K(),"fn"!==z().t&&q();break;case"*":"*"!==nt||""===G.v&&0!==z().tokens.length?""!==G.v||![")",""].includes(Q())&&")"!==n.substring(U+1).trim()?Z(nt):(G.v=nt,K()):(G.v+=nt,"./*"===G.v&&K());break;case"-":var it=(C=void 0,(C=z().tokens)[C.length-1]);if(""!==G.v&&" "!==Q()&&" "!==n.charAt(U-1))G.v+=nt;else if(0===z().tokens.length&&""===G.v||it&&"op"===it.t||it&&"num"===it.t&&j.length>1&&"fn"===j[1].t||it&&"num"!==it.t&&et(Q()))G={t:"num",string:"-"};else{if(""!==G.v){if(!N.test(G.v)&&" "!==n[U-1])throw S;z().tokens.push(G)}Z(nt)}break;case"=":if("<"===G.v||"&lt;"===G.v||">"===G.v||"&gt;"===G.v||"!"===G.v)switch(G.v+=nt,G.v){case"<=":case"&lt;=":Z("<=");break;case">=":case"&gt;=":Z(">=");break;case"!=":Z("!=")}else G.v&&K(),Z(nt);break;case";":switch(G.v){case"&lt":G.v="",nt="<";break;case"&gt":G.v="",nt=">";break;default:G.v+=nt;continue}case">":case"<":if(G.v&&K(),"="===Q()){G.v=nt;break}case"+":Z(nt);break;case" ":switch(G.v){case"":break;case"mod":Z("%");break;case"div":Z("/");break;case"and":Z("&");break;case"or":Z("|");break;default:var ut=G.v.toLowerCase();if(/^(mod|div|and|or)$/.test(ut))throw S;x.test(G.v)||K()}break;case"[":G.sq=(G.sq||0)+1;case".":if(""===G.v&&")"===Q()){G.v=nt,K();break}if(""===G.v&&et(Q())){G={t:"num",string:nt};break}default:G.v+=nt}}else nt===G.quote?(z().tokens.push(G),W()):G.v+=nt}return"num"===G.t&&tt(),"?"===G.t&&""!==G.v&&K(),("?"!==G.t||""!==G.v||G.tokens&&G.tokens.length)&&q("Current item not evaluated!"),j.length>1&&q("Stuff left on stack."),"root"!==j[0].t&&q("Weird stuff on stack."),0===j[0].tokens.length&&q("No tokens."),j[0].tokens.length>=3&&J(),j[0].tokens.length>1&&q("Too many tokens."),function(t,e){if(s.toExternalResult){var n=s.toExternalResult(t);if(n)return n}if(t.v&&"function"==typeof t.v.then&&e===XPathResult.STRING_TYPE)return{resultType:XPathResult.STRING_TYPE,stringValue:t.v};if("arr"===t.t&&e===XPathResult.NUMBER_TYPE&&c.test(t.v[0])||"str"===t.t&&e===XPathResult.NUMBER_TYPE&&c.test(t.v)){var o="arr"===t.t?t.v[0]:t.v,a=h(o);return{resultType:XPathResult.NUMBER_TYPE,numberValue:a,stringValue:a}}if("num"===t.t)return{resultType:XPathResult.NUMBER_TYPE,numberValue:t.v,stringValue:t.v.toString()};if("bool"===t.t)return{resultType:XPathResult.BOOLEAN_TYPE,booleanValue:t.v,stringValue:t.v.toString()};if(e>3)return t=r(t[0],t[1]),p(t,e);if(!t.t&&Array.isArray(t)){if(e===XPathResult.NUMBER_TYPE){var i=parseInt(t[0].textContent);return{resultType:XPathResult.NUMBER_TYPE,numberValue:i,stringValue:i.toString()}}if(e===XPathResult.STRING_TYPE)return{resultType:XPathResult.STRING_TYPE,stringValue:t.length?t[0]:""}}return{resultType:XPathResult.STRING_TYPE,stringValue:null===t.v?"":t.v.toString()}}(j[0].tokens[0],m)}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=2147483647;function n(t){this._seed=t%e,this._seed<=0&&(this._seed+=e-1)}n.prototype.next=function(){return this._seed=16807*this._seed%e,this._seed},n.prototype.nextFloat=function(){return(this.next()-1)/(e-1)},t.exports=function(t,e){var r,o=[];if(void 0!==e){if(!Number.isInteger(e))throw new Error("Invalid seed argument. Integer required.");var a=new n(e);r=a.nextFloat.bind(a)}else r=Math.random;for(var i=0;i<t.length;++i){var u=Math.floor(r()*(i+1));u!==i&&(o[i]=o[u]),o[u]=t[i]}return o}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(2).toSnapshotResult;t.exports={isNamespaceExpr:function(t){return/^(namespace::node\(\)|namespace::\*)$/.test(t)||/^namespace::/.test(t)},handleNamespaceExpr:function(t,n){return/^(namespace::node\(\)|namespace::\*)$/.test(t)?function(t){for(var n=[],r={},o=[],a=t;a;){if(a.attributes)for(var i=0;i<a.attributes.length;i++){var u=a.attributes[i],s=u.ownerElement.getAttributeNode(u.name);if(s.nodeName.startsWith("xmlns")&&!r[s.nodeName]){var l=s.nodeName.split(":");r[s.nodeName]=s.nodeName,s.nodeValue.length&&(o.push(s),n.push({nodeName:"#namespace",localName:l.length>1?l[1]:"",namespaceURI:s.nodeValue}))}}a=1===t.nodeType?a.parentNode:null}return n.length>0&&!r.xmlns&&n.push({nodeName:"#namespace",localName:"xmlns",namespaceURI:"http://www.w3.org/1999/xhtml"}),n.length>0&&!r.xml&&n.push({nodeName:"#namespace",localName:"xml",namespaceURI:"http://www.w3.org/XML/1998/namespace"}),n=n.sort((function(t,e){return t.localName<e.localName?-1:t.localName>e.localName?1:0})),e(n,7,o[0])}(n):/^namespace::/.test(t)?function(t,n){var r=t.substring(11),o=[],a=[];if(n.attributes)for(var i=0;i<n.attributes.length;i++){var u=n.attributes[i],s=u.ownerElement.getAttributeNode(u.name);s.nodeName==="xmlns:"+r&&(a.push(s),o.push({nodeName:"#namespace",localName:r,namespaceURI:s.nodeValue}))}return e(o)}(t,n):void 0}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(0).dateToDays;function r(t){if("string"==typeof t){var e=t.replace(/["']/g,"");return e.trim().length&&!isNaN(e.trim())}return"number"==typeof t}t.exports={handleOperation:function(t,n,o,a){if("+"===n.v&&r(t.v)&&r(o.v)&&(t.v=Number(t.v),o.v=Number(o.v)),"arr"===t.t&&1===t.v.length&&"num"===o.t&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t.v[0])&&(t={t:"num",v:e(t.v[0],!1)}),"arr"===o.t&&1===o.v.length&&"num"===t.t&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(o.v[0])&&(o={t:"num",v:e(o.v[0],!1)}),"arr"===t.t&&1===t.v.length&&"str"===o.t&&(t={t:"str",v:t.v[0]}),"arr"===o.t&&1===o.v.length&&"str"===t.t&&(o={t:"str",v:o.v[0]}),"arr"===o.t&&1===o.v.length&&"arr"===t.t&&1===t.v.length&&(t={t:"str",v:t.v[0]},o={t:"str",v:o.v[0]}),"str"===t.t&&/^\d\d\d\d-\d{1,2}-\d{1,2}/.test(t.v)&&(t={t:"num",v:e(t.v,!1)}),"str"===o.t&&/^\d\d\d\d-\d{1,2}-\d{1,2}/.test(o.v)&&(o={t:"num",v:e(o.v,!1)}),"-"===n.v&&(isNaN(t.v)||isNaN(o.v)))return NaN;switch(/^(=|!=)$/.test(n.v)&&("str"===t.t&&"bool"===o.t&&(t=t.v.length>0&&"1"===t.v?{t:"bool",v:!0}:""===t.v?{t:"bool",v:!1}:{t:"bool",v:void 0}),"str"===o.t&&"bool"===t.t&&(o=o.v.length>0&&"1"===o.v?{t:"bool",v:!0}:""===o.v?{t:"bool",v:!1}:{t:"bool",v:void 0}),"num"===t.t&&"bool"===o.t&&(t={t:"bool",v:Boolean(t.v)}),"num"===o.t&&"bool"===t.t&&(o={t:"bool",v:Boolean(o.v)})),n.v){case"+":return t.v+o.v;case"-":return t.v-o.v;case"*":return t.v*o.v;case"/":return t.v/o.v;case"%":return t.v%o.v;case"=":return/^(num|str)$/.test(t.t)&&"arr"===o.t?o.v.includes(t.string||t.v):/^(num|str)$/.test(o.t)&&"arr"===t.t?t.v.includes(o.string||o.v):"bool"===t.t&&"arr"===o.t?t.v===o.v.length>0:"bool"===o.t&&"arr"===t.t?o.v===t.v.length>0:t.v==o.v;case"<":if("bool"===t.t)return!1===t.v&&"arr"===o.t&&o.v.length>0||(!0===t.v&&"num"===o.t?1<o.v:!1===t.v&&"num"===o.t?0<o.v:!1===t.v&&"bool"===o.t&&!0===o.v);if("bool"===o.t)return!0===o.v&&"arr"===t.t&&0===t.v.length||!0===o.v&&"num"===t.t&&t.v<1;if("arr"===t.t&&t.v.length>0){for(var i=0;i<t.v.length;i++)if(Number(t.v[i])<o.v)return!0;return!1}if("arr"===o.t&&o.v.length>0){for(var u=0;u<o.v.length;u++)if(t.v<Number(o.v[u]))return!0;return!1}return"arr"===t.t&&0===t.v.length&&(t={t:"num",string:"0",v:0}),"arr"===o.t&&0===o.v.length&&(o={t:"num",string:"0",v:0}),"str"===t.t&&"str"===o.t&&a.allowStringComparison?t.v<o.v:!(!r(t.v)||!r(o.v))&&t.v<o.v;case">":if("bool"===t.t)return!0===t.v&&"arr"===o.t&&0===o.v.length||(!0===t.v&&"num"===o.t?1>o.v:!0===t.v&&"bool"===o.t&&1>(!0===o.v?1:0));if("bool"===o.t)return!1===o.v&&"arr"===t.t&&t.v.length>0||(!1===o.v&&"num"===t.t?t.v>0:!0===o.v&&"num"===t.t?t.v>1:"num"===t.t&&(t.v>o.v==1?1:0));if("arr"===t.t&&t.v.length>0){for(var s=0;s<t.v.length;s++)if(Number(t.v[s])>o.v)return!0;return!1}if("arr"===o.t&&o.v.length>0){for(var l=0;l<o.v.length;l++)if(t.v>Number(o.v[l]))return!0;return!1}return"arr"===t.t&&0===t.v.length&&(t={t:"num",string:"0",v:0}),"bool"===t.t&&!0===t.v&&(t={t:"num",string:"1",v:1}),"bool"===t.t&&!1===t.v&&(t={t:"num",string:"0",v:0}),"arr"===o.t&&0===o.v.length&&(o={t:"num",string:"0",v:0}),"bool"===o.t&&!0===o.v&&(o={t:"num",string:"1",v:1}),"bool"===o.t&&!1===o.v&&(o={t:"num",string:"0",v:0}),"str"===t.t&&"str"===o.t&&a.allowStringComparison?t.v>o.v:!(!r(t.v)||!r(o.v))&&t.v>o.v;case"<=":if("arr"===o.t&&0===o.v.length&&t.string&&t.string.length>0)return!1;if("arr"===t.t&&0===t.v.length&&o.string&&o.string.length>0)return!1;if("bool"===o.t&&!1===o.v&&"arr"===t.t&&t.v.length>0)return!1;if("bool"===t.t&&(t={t:"num",v:!0===t.v?1:0,string:!0===t.v?"1":"0"}),"bool"===o.t&&(o={t:"num",v:!0===o.v?1:0,string:!0===t.v?"1":"0"}),"arr"===t.t&&t.v.length>0){for(var f=0;f<t.v.length;f++)if(Number(t.v[f])<=o.v)return!0;return!1}if("arr"===o.t&&o.v.length>0){for(var v=0;v<o.v.length;v++)if(t.v<=Number(o.v[v]))return!0;return!1}return"arr"===o.t&&0===o.v.length&&(o={t:"num",string:"0",v:0}),"arr"===t.t&&0===t.v.length&&(t={t:"num",string:"0",v:0}),"bool"===t.t&&!0===t.v&&(t={t:"num",string:"1",v:1}),"bool"===t.t&&!1===t.v&&(t={t:"num",string:"0",v:0}),"bool"===o.t&&!0===o.v&&(o={t:"num",string:"1",v:1}),"bool"===o.t&&!1===o.v&&(o={t:"num",string:"0",v:0}),"str"===t.t&&"str"===o.t&&a.allowStringComparison?t.v<=o.v:!(!r(t.v)||!r(o.v))&&t.v<=o.v;case">=":if("arr"===o.t&&0===o.v.length&&t.string&&t.string.length>0)return!1;if("arr"===o.t&&o.v.length>0&&!1===t.v)return!1;if("arr"===t.t&&0===t.v.length)return("str"!==o.t||""!==o.v)&&("str"===o.t?o.v.length>=0:o.v.length>=0||!1===o.v);if("bool"===t.t&&(t={t:"num",v:!0===t.v?1:0,string:!0===t.v?"1":"0"}),"bool"===o.t&&(o={t:"num",v:!0===o.v?1:0,string:!0===t.v?"1":"0"}),"arr"===t.t&&t.v.length>0){for(var c=0;c<t.v.length;c++)if(Number(t.v[c])>=o.v)return!0;return!1}if("arr"===o.t&&o.v.length>0){for(var h=0;h<o.v.length;h++)if(t.v>=Number(o.v[h]))return!0;return!1}return"arr"===t.t&&0===t.v.length&&(t={t:"num",string:"0",v:0}),"bool"===t.t&&!0===t.v&&(t={t:"num",string:"1",v:1}),"bool"===t.t&&!1===t.v&&(t={t:"num",string:"0",v:0}),"arr"===o.t&&0===o.v.length&&(o={t:"num",string:"0",v:0}),"bool"===o.t&&!0===o.v&&(o={t:"num",string:"1",v:1}),"bool"===o.t&&!1===o.v&&(o={t:"num",string:"0",v:0}),"str"===t.t&&"str"===o.t&&a.allowStringComparison?t.v>=o.v:!(!r(t.v)||!r(o.v))&&t.v>=o.v;case"!=":return"bool"===t.t&&"arr"===o.t?t.v===o.v.length<1:"bool"===o.t&&"arr"===t.t?o.v===t.v.length<1:t.v!=o.v;case"&":return Boolean(t.v&&o.v);case"|":return Boolean(t.v||o.v)}}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(0),r=e.DATE_STRING,o=e.dateToDays,a=new Error("too many args"),i=new Error("too few args"),u=new Error("invalid args"),s=/^id\(|^\([1-9]|^\([a-zA-Z]|lang\(|local-name|namespace-uri|last\(|name\(|child::|parent::|descendant::|descendant-or-self::|ancestor::|ancestor-or-self::sibling|following::|following-sibling::|preceding-sibling::|preceding::|attribute::|^\/.*$/;function l(t,e,n){if(null!=e&&t.length<e)throw i;if(null!=n&&t.length>n)throw a}t.exports={isNativeFunction:function(t){return s.test(t)},preprocessNativeArgs:function(t,e){if("number"===t&&e.length&&("arr"===e[0].t?e=[{t:"num",v:e[0].v[0]}]:"str"===e[0].t&&r.test(e[0].v)?e=[{t:"num",v:o(e[0].v)}]:"num"===e[0].t&&e[0].v.toString().indexOf("e-")>0&&(e=[{t:"num",v:0}])),"name"===t&&e.length<2)throw i;if("namespace-uri"===t){if(e.length>1)throw a;if(0===e.length)throw i;if(1===e.length&&!isNaN(e[0].v))throw u}if("local-name"===t){if(e.length>1)throw a;if(1===e.length&&!isNaN(e[0].v))throw u}return"substring"===t&&e.length>2&&e[1].v===Number.NEGATIVE_INFINITY&&e[2].v===Number.POSITIVE_INFINITY&&(e[0].v=""),"substring"===t&&e.length>1&&e[1].v<0&&(e[1].v=0),"substring"===t&&e.length>2&&e[2].v===Number.POSITIVE_INFINITY&&(e[2].v=e[0].v.length+1),function(t,e){"last"===t?l(e,null,0):/^(boolean|lang|ceiling|name|floor)$/.test(t)?l(e,1,1):/^(number|string|normalize-space|string-length)$/.test(t)?l(e,null,1):"substring"===t?l(e,2,3):/^(starts-with|contains|substring-before|substring-after)$/.test(t)?l(e,2,2):"translate"===t&&l(e,3,3)}(t,e),e}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=/\(\s*([^)]*)\)$/;t.exports={inputArgs:function(t){var n=t.match(e);return n?n[1].split(","):[]},preprocessInput:function(t,e){return function(t,e){return e===XPathResult.NUMBER_TYPE&&t.indexOf("(")<0&&!t.startsWith("/")}(t,e)&&((t=t.replace("\n","")).indexOf("mod")>0&&(t=t.replace("mod"," mod ")),t.indexOf("div")>0&&(t=t.replace("div"," div "))),"string(namespace::node())"===t&&(t=t.replace("namespace::node()","namespace-uri(/*)")),t}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(14),r=e.area,o=e.distance,a=e.areaOrDistance,i=n(15).digest,u=n(17).randomToken,s=n(3),l=n(0).isValidDate;t.exports=function(t){var e,n,f=new Error("too many args"),v=new Error("too few args"),c=/^(-?[0-9]+)(\.[0-9]+)?$/,h=/^\d\d\d\d-\d{1,2}-\d{1,2}(?:T\d\d:\d\d:\d\d\.?\d?\d?(?:Z|[+-]\d\d:\d\d)|.*)?$/,g=s,d=function(t,e){for(e=e||2,t=t.toString();t.length<e;)t="0"+t;return t},p=function(t){return Math.round(m(t))},m=function(t){return"num"===t.t?t.v:parseFloat(b(t))},b=function(t){return"arr"===t.t?t.v.length?t.v[0].toString():"":t.v.toString()},T=function(t){return t<0?-Math.round(-t):Math.round(t)},y=function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)},N=function(t,e){var n,r;if(t.v instanceof Date)return new Date(t.v);if(t=b(t),c.test(t))return(n=new Date(1970,0,1)).setDate(1+parseInt(t,10)),n;if(h.test(t)){if(e&&t.indexOf("T")>0)return new Date(t);if(-1!==(r=t.indexOf("T"))&&(t=t.substring(0,r)),n=t.split("-"),l(n[0],n[1],n[2]))return new Date(n[0],n[1]-1,n[2])}var o=new Date(t);return"Invalid Date"==o?null:o},x=function(e,n){return n===XPathResult.BOOLEAN_TYPE?e?g.boolean(!isNaN(new Date(e).getTime())):g.boolean(!1):n===XPathResult.NUMBER_TYPE?e?g.number(new Date(e).getTime()/864e5):g.number(0):n===XPathResult.STRING_TYPE?e?g.string(new Date(e).toISOLocalString()):g.string(t.returnEmptyStringForInvalidDate?"":"Invalid Date"):e?g.date(e):g.string("Invalid Date")},w=function(t,e){return t=N(t),x(t,e)},E={},P=function(t,e){return x(E._now(e),t)};return(e={abs:function(t){return g.number(Math.abs(t.v))},acos:function(t){return g.number(Math.acos(t.v))},asin:function(t){return g.number(Math.asin(t.v))},atan:function(t){return g.number(Math.atan(t.v))},atan2:function(t){if(arguments.length>1){var e=arguments[0].v,n=arguments[1].v;return g.number(Math.atan2(e,n))}return g.number(Math.atan2(t.v))},"boolean-from-string":function(t){if("num"===t.t&&t.v>0&&!t.decimal)return g.boolean(!0);var e=b(t);return g.boolean("1"===e||"true"===e)},area:function(t){if(0===arguments.length)throw v;return a(g.number,r,t)},checklist:function(t,e){var n,r,o=0;for(t=t.v,e=e.v,n=2;n<arguments.length;n++){var a=arguments[n];if("bool"===a.t&&Boolean(a.v))o++;else if("arr"===a.t)for(r=0;r<a.v.length;r++)a.v[r]&&o++}return g.boolean((t<0||o>=t)&&(e<0||o<=e))},coalesce:function(t,e){return g.string(b(t)||b(e))},concat:function(){for(var t=[],e=0;e<arguments.length;e++)"arr"===arguments[e].t?t.push(arguments[e].v.join("")):t.push(arguments[e].v);return g.string(t.join(""))},cos:function(t){return g.number(Math.cos(t.v))},"count-non-empty":function(t){if(0===arguments.length||"arr"!==t.t)throw v;for(var e=0,n=0;n<t.v.length;n++)e+=""===t.v[n]?0:1;return g.number(e)},"count-selected":function(t){for(var e=b(t).split(" "),n=e.length,r=0;--n>=0;)e[n].length&&++r;return g.number(r)},date:function(t,e){return t=N(t),x(t,e)},"decimal-date":function(t){if(arguments.length>1)throw f;var e=Date.parse(b(t))/864e5;return g.number(e)},"decimal-time":function(t){if(arguments.length>1)throw f;if("num"===t.t)return g.number(NaN);var e,n=t.v,r=n.match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/);if(r&&r[1]<24&&r[1]>=0&&r[2]<60&&r[2]>=0&&r[3]<60&&r[3]>=0&&r[6]<24&&r[6]>=0&&r[7]<60&&r[7]>=0){var o=function(t){return t<10?"0"+t:t},a=new Date,i=new Date(a.getFullYear()+"-"+o(a.getMonth()+1)+"-"+o(a.getDate())+"T"+n);e="Invalid Date"===i.toString()?NaN:(i.getSeconds()/3600+i.getMinutes()/60+i.getHours())/24}else e=NaN;return g.number(e)},digest:function(t,e,n){return g.string(i(t,e,n))},distance:function(t){if(0===arguments.length)throw v;return a(g.number,o,t)},exp:function(t){return g.number(Math.exp(t.v))},exp10:function(t){return g.number(Math.pow(10,t.v))},false:function(t){if(t===XPathResult.NUMBER_TYPE)return g.number(0);if(arguments.length>1)throw f;return g.boolean(!1)},"format-date":function(t,e){return g.string(function(t,e){if(t=N(t,!0),!e)return"";if(e=b(e),!t)return"Invalid Date";var n,r,o="",a={year:1900+t.getYear(),month:1+t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millis:t.getMilliseconds(),secTicks:t.getTime(),dow:1+t.getDay()},i=window?window.enketoFormLocale:void 0;for(r=0;r<e.length;++r)if("%"===(n=e.charAt(r))){if(++r>=e.length)throw new Error("date format string ends with %");if("%"===(n=e.charAt(r)))o+="%";else if("Y"===n)o+=d(a.year,4);else if("y"===n)o+=d(a.year,4).substring(2);else if("m"===n)o+=d(a.month,2);else if("n"===n)o+=a.month;else if("b"===n)o+=t.toLocaleDateString(i,{month:"short"});else if("d"===n)o+=d(a.day,2);else if("e"===n)o+=a.day;else if("H"===n)o+=d(a.hour,2);else if("h"===n)o+=a.hour;else if("M"===n)o+=d(a.minute,2);else if("S"===n)o+=d(a.second,2);else if("3"===n)o+=d(a.millis,3);else{if("a"!==n)throw"Z"===n||"A"===n||"B"===n?new Error("unsupported escape in date format string [%"+n+"]"):new Error("unrecognized escape in date format string [%"+n+"]");o+=t.toLocaleDateString(i,{weekday:"short"})}}else o+=n;return o}(t,e))},if:function(t,e,n){if("bool"===t.t)return g.string(t.v?e.v:n.v);if("arr"===t.t){var r=t.v.length&&null!==t.v[0];return g.string(r?e.v:n.v)}return g.string(n.v)},"ends-with":function(t,e){if(arguments.length>2)throw f;if(arguments.length<2)throw v;return g.boolean(t.v.endsWith(e.v))},int:function(t){return"str"===t.t&&t.v.indexOf("e-")>0?g.number(NaN):(t=b(t)).indexOf("e-")>0?g.number(0):g.number(parseInt(t,10))},join:function(){var t=arguments[0];if(arguments.length<2)return g.string("");if(arguments.length>2){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n].v);return g.string(e.join(b(t)))}return g.string(arguments[1].v.join(b(t)))},log:function(t){return g.number(Math.log(t.v))},log10:function(t){return g.number(Math.log10(t.v))},max:function(){if(arguments.length>1){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e].v);return g.number(Math.max.apply(null,t))}var n,r,o=arguments[0].v;if(!(r=o.length))return g.number(NaN);for(n=parseFloat(o[0]);--r;)n=Math.max(n,parseFloat(o[r]));return g.number(n)},min:function(){if(arguments.length>1){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e].v);return g.number(Math.min.apply(null,t))}var n,r,o=arguments[0].v;if(!(r=o.length))return g.number(NaN);for(n=parseFloat(o[0]);--r;)n=Math.min(n,parseFloat(o[r]));return g.number(n)},not:function(t){if(0===arguments.length)throw v;if(arguments.length>1)throw f;return g.boolean(!t.v)},now:function(t){return P(t)},today:function(e){var n=P(e,!t.returnCurrentTimeForToday);return e!==XPathResult.STRING_TYPE||t.includeTimeForTodayString||(n.v=n.v.split("T")[0]),n},once:function(t,e){return t.v.length&&t.v[0].length?g.string(t.v[0]):e.v==1/0?g.string(""):"num"===e.t&&0===e.v?g.string(""):g.string(e.v)},pi:function(){return g.number(Math.PI)},position:function(t){var e=1;if(t)for(var n=t.iterateNext(),r=n.tagName;n.previousElementSibling&&n.previousElementSibling.tagName===r;)n=n.previousElementSibling,e++;return g.number(e)},pow:function(t,e){return g.number(Math.pow(m(t),m(e)))},random:function(){return g.number(Math.random())},randomize:function(t){if(1===arguments.length)throw v;if(arguments.length>3)throw f;var e=arguments.length>2?arguments[1]:arguments[2],n=arguments[arguments.length-1];return n===XPathResult.BOOLEAN_TYPE?g.boolean(t.v.length>0):n===XPathResult.STRING_TYPE?t.v.length<1?"":g.string(t.v[0]):Array.isArray(e)&&e.length&&1===e[0].nodeType?[t,parseInt(e[0].textContent)]:[t,e&&e.v]},regex:function(t,e){return g.boolean(new RegExp(b(e)).test(b(t)))},round:function(t,e){if(0===arguments.length)throw v;if(arguments.length>2)throw f;if(t=m(t),!e)return g.number(T(t));e=p(e);var n=Math.pow(10,Math.abs(e));return e>0?g.number(T(t*n)/n):g.number(n*T(t/n))},selected:function(t,e){return g.boolean(-1!==b(t).split(" ").indexOf(b(e).trim()))},"selected-at":function(t,e){if(!e)throw new Error(JSON.stringify(t));return g.string(b(t).split(" ")[p(e)]||"")},sin:function(t){return g.number(Math.sin(t.v))},sqrt:function(t){return g.number(Math.sqrt(t.v))},substr:function(t,e,n){return g.string(b(t).slice(p(e),n&&p(n)))},sum:function(t){if(arguments.length>1)throw f;for(var e=0,n=0;n<t.v.length;n++)c.test(t.v[n])||g.number(NaN),e+=parseInt(t.v[n],10);return g.number(e)},tan:function(t){return g.number(Math.tan(t.v))},true:function(t){if(t===XPathResult.NUMBER_TYPE)return g.number(1);if(arguments.length>1)throw f;return g.boolean(!0)},uuid:function(t){return t&&t.v?g.string(u(t.v)):g.string("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,y))},"weighted-checklist":function(t,e){var n,r=[],o=[],a=0;for(t=t.v,e=e.v,n=2;n<arguments.length;n+=2){var i=arguments[n],u=arguments[n+1];i&&u&&(r.push("arr"===i.t?i.v[0]:i.v),o.push("arr"===u.t?u.v[0]:u.v))}for(n=0;n<r.length;n++)r[n]&&(a+=o[n]);return g.boolean((t<0||a>=t)&&(e<0||a<=e))}})["date-time"]=e.date,e["decimal-date-time"]=e["decimal-date"],e["format-date-time"]=e["format-date"],n={toExternalResult:function(t){if("date"===t.t)return{resultType:XPathResult.STRING_TYPE,numberValue:t.v.getTime(),stringValue:(e=t.v,e.getFullYear()+"-"+d(e.getMonth()+1)+"-"+d(e.getDate()))};var e},typefor:function(t){if(t instanceof Date)return"date"},handleInfix:function(t,e,n,r){if("date"===e.t||"date"===r.t){if("="===n.v||"<"===n.v||">"===n.v||"<="===n.v||">="===n.v||"!="===n.v){if("arr"!==e.t&&"str"!==e.t||(e=w(e)),"arr"!==r.t&&"str"!==r.t||(r=w(r)),"date"!==e.t||"date"!==r.t)return"!="===n.v;e={t:"num",v:e.v.getTime()},r={t:"num",v:r.v.getTime()}}else if("+"===n.v||"-"===n.v){"date"===e.t&&"date"===r.t&&t();var o="date"===e.t?e.v:r.v,a="date"!==e.t?p(e):p(r),i=new Date(o.getTime());return"-"===n.v&&(a=-a),i.setDate(o.getDate()+a),i}return{t:"continue",lhs:e,op:n,rhs:r}}}},E.func=e,E.process=n,E.XPR=g,E._now=function(t){var e=new Date;return t?new Date(e.getFullYear(),e.getMonth(),e.getDate()):e},E.customXPathFunction={type:{StringType:g.string,NumberType:g.number,BooleanType:g.boolean,DateType:g.date},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},all:function(){return e}},E}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=6378100,n=100;function r(t){return t.map((function(t){return t.trim().split(" ")}))}function o(t){return t*Math.PI/180}function a(t){return t.every((function(t){return""!==t[0]&&t[0]>=-90&&t[0]<=90&&""!==t[1]&&t[1]>=-180&&t[1]<=180&&(void 0===t[2]||!isNaN(t[2]))&&(void 0===t[3]||!isNaN(t[3])&&t[3]>=0)}))}function i(t,n){var r=o(t.lng-n.lng),a=o(t.lat),i=o(n.lat);return Math.acos(Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos(r))*e}t.exports={area:function(t){var i=r(t);if(!a(i))return Number.NaN;var u=i.length,s=0;if(u>2){for(var l=0;l<u;l++){var f={lat:i[l][0],lng:i[l][1]},v={lat:i[(l+1)%u][0],lng:i[(l+1)%u][1]};s+=o(v.lng-f.lng)*(2+Math.sin(o(f.lat))+Math.sin(o(v.lat)))}s=s*e*e/2}return Math.abs(Math.round(s*n))/n},areaOrDistance:function(t,e,n){var r=[];return"str"===n.t&&(r=n.v.split(";")),"arr"===n.t&&(r=1===n.v.length?n.v[0].split(";"):n.v),t(e(r))},distance:function(t){var e=r(t);if(!a(e))return Number.NaN;var o=e.length,u=0;if(o>1)for(var s=1;s<o;s++)u+=i({lat:e[s-1][0],lng:e[s-1][1]},{lat:e[s][0],lng:e[s][1]});return Math.abs(Math.round(u*n))/n}}})?r.apply(e,o):r)||(t.exports=a)},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";var e=n(16);t.exports={digest:function(t,n,r){if(t=t.v,n=n&&n.v&&n.v.toLowerCase(),r=r&&r.v&&r.v.toLowerCase()||"base64",!n||!/^(md5|sha-1|sha-256|sha-384|sha-512)$/.test(n))throw new Error("Invalid algo.");if(!/^(base64|hex)$/.test(r))throw new Error("Invalid encoding.");var o=e.md[n.replace("-","")].create();o.update(t);var a=o.digest();return r&&"base64"!==r?o.digest().toHex():e.util.encode64(a.bytes())}}})?r.apply(e,o):r)||(t.exports=a)},function(e,n){e.exports=t},function(t,e,n){var r,o,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(a="function"==typeof(r=function(){"use strict";function e(){return Math.random().toString(16).substring(2)}t.exports={randomToken:function(t){var n=Math.ceil(t/13);return new Array(n).fill(e).reduce((function(t,e){return t+e()}),"").substring(0,t)}}})?r.apply(e,o):r)||(t.exports=a)}])}));