{"version":3,"sources":["webpack://orxe/webpack/universalModuleDefinition","webpack://orxe/webpack/bootstrap","webpack://orxe/./src/utils/date.js","webpack://orxe/./src/config.js","webpack://orxe/./src/utils/result.js","webpack://orxe/./src/xpr.js","webpack://orxe/./src/XPathJS.js","webpack://orxe/./src/engine.js","webpack://orxe/./src/date-extensions.js","webpack://orxe/./src/extended-xpath.js","webpack://orxe/./src/utils/shuffle.js","webpack://orxe/./src/utils/ns.js","webpack://orxe/./src/utils/operation.js","webpack://orxe/./src/utils/native.js","webpack://orxe/./src/utils/input.js","webpack://orxe/./src/openrosa-extensions.js","webpack://orxe/./src/geo.js","webpack://orxe/./src/digest.js","webpack://orxe/external \"node-forge\"","webpack://orxe/./src/random-token.js"],"names":["DATE_STRING","dateToDays","d","rounded","temp","indexOf","Date","split","r","getTime","Math","round","daysInMonth","m","y","isValidDate","parseInt","module","exports","allowStringComparison","includeTimeForTodayString","returnCurrentTimeForToday","returnEmptyStringForInvalidDate","toNodes","n","v","iterateNext","push","getNamespaceAtts","result","name","unshift","toSnapshotResult","nodes","rt","singleItem","idx","resultType","singleNodeValue","length","snapshotLength","snapshotItem","i","val","t","number","string","date","Error","require","ExtendedXPathEvaluator","openrosaExtensions","config","extensions","OpenrosaXPathEvaluator","evaluator","XPathEvaluator","createExpression","createNSResolver","evaluate","expr","contextPath","namespaceResolver","wrappedXpathEvaluator","node","startsWith","wrappedResultType","XPathResult","ANY_TYPE","xevaluator","apply","arguments","customXPathFunction","getCurrentDomLevel3XPathBindings","XPathException","window","XPathExpression","XPathNSResolver","XPathNamespace","document","createDomLevel3XPathBindings","options","openrosaEvaluator","bindDomLevel3XPath","doc","bindings","newBindings","currentBindings","prototype","toISOLocalString","toString","dt","getTimezoneOffset","toISOString","replace","getTimezoneOffsetAsTime","offsetMinutesTotal","hours","minutes","direction","pad2","x","floor","abs","shuffle","isNamespaceExpr","handleNamespaceExpr","handleOperation","isNativeFunction","preprocessNativeArgs","inputArgs","preprocessInput","xpr","OP_PRECEDENCE","DIGIT","FUNCTION_NAME","NUMERIC_COMPARATOR","BOOLEAN_COMPARATOR","BOOLEAN_FN_COMPARATOR","COMPARATOR","INVALID_ARGS","TOO_MANY_ARGS","TOO_FEW_ARGS","wrapped","extendedFuncs","func","extendedProcessors","process","toInternalResult","NUMBER_TYPE","numberValue","BOOLEAN_TYPE","booleanValue","UNORDERED_NODE_ITERATOR_TYPE","textContent","stringValue","toExternalResult","res","then","STRING_TYPE","test","days","Array","isArray","callFn","args","hasOwnProperty","callExtended","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","callNative","argVals","argString","arg","quote","typefor","input","cN","nR","rT","isNaN","nodeType","ownerElement","substring","firstNode","firstNodeValue","exec","bargs","ownerDocument","selectedExprIdx","selectedExpr","selection","selectionExpr","map","s","trim","selectionResult","values","join","type","xx","cur","stack","tokens","peek","err","message","JSON","stringify","newCurrent","pushOp","evalOp","lhs","op","rhs","handleInfix","evalOpAt","opIndex","splice","backtrack","j","ops","handleXpathExpr","returnType","evaluated","includes","nextChar","charAt","finaliseNum","parseFloat","prevToken","peeked","isNum","c","sq","decimal","tail","pop","expectedReturnType","prev","toLowerCase","MAX_INT32","MINSTD","array","seed","rng","isInteger","rnd","Random","nextFloat","bind","random","_seed","next","namespace","nsId","xnamespaces","xitems","attributes","ii","xattr","xitem","getAttributeNode","nodeName","localName","namespaceURI","nodeValue","namespaceNode","namespaces","namespaceKeys","items","attr","item","names","parentNode","xmlns","xml","sort","n1","n2","isNumber","value","nbr","NaN","undefined","Boolean","iii","k","l","p","q","NATIVE_FUNS","checkMinMaxArgs","min","max","checkNativeFn","isOperation","ARGS_REGEX","match","area","distance","areaOrDistance","digest","randomToken","openrosa_xpath_extensions","MILLIS_PER_DAY","RAW_NUMBER","XPR","_zeroPad","len","_int","_float","_str","_dateToString","getFullYear","getMonth","getDate","_round","num","_uuid_part","_date","it","keepTime","setDate","_dateForReturnType","uuid","format_date","format","sb","f","year","getYear","month","day","hour","getHours","minute","getMinutes","second","getSeconds","millis","getMilliseconds","secTicks","dow","getDay","locale","enketoFormLocale","toLocaleDateString","weekday","ret","now_and_today","resetTime","_now","acos","asin","atan","atan2","checklist","trues","coalesce","a","b","concat","out","cos","counter","parts","count","parse","time","dec","today","msg","algo","encoding","exp","exp10","pow","con","exists","endsWith","delim","log","log10","not","now","once","Infinity","pi","PI","position","tagName","previousElementSibling","randomize","regex","haystack","pattern","RegExp","num_digits","selected","needle","list","index","sin","sqrt","substr","startIndex","endIndex","slice","sum","tan","weights","weightedTrues","w","StringType","NumberType","BooleanType","DateType","add","fnObj","remove","all","EARTH_EQUATORIAL_RADIUS_METERS","PRECISION","_toLatLngs","geopoints","geopoint","_toRadians","angle","_latLngsValid","latLngs","every","coords","_distanceBetween","p1","p2","Δλ","lng","φ1","lat","φ2","fn","pointsCount","forge","md","create","update","hashBuffer","util","encode64","bytes","toHex","_random13chars","loops","ceil","fill","reduce"],"mappings":"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","file":"orxe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"node-forge\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"orxe\", [\"node-forge\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"orxe\"] = factory(require(\"node-forge\"));\n\telse\n\t\troot[\"orxe\"] = factory(root[\"node-forge\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__16__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","var DATE_STRING = /^\\d\\d\\d\\d-\\d{1,2}-\\d{1,2}(?:T\\d\\d:\\d\\d:\\d\\d\\.?\\d?\\d?(?:Z|[+-]\\d\\d:\\d\\d)|.*)?$/;\n\nfunction dateToDays(d, rounded) {\n  var temp = null;\n  if(d.indexOf('T') > 0) {\n    temp = new Date(d);\n  } else {\n    temp = d.split('-');\n    temp = new Date(temp[0], temp[1]-1, temp[2]);\n  }\n  var r = (temp.getTime()) / (1000 * 60 * 60 * 24);\n  return rounded === false ? r : Math.round(r*100000)/100000;\n}\n\n/**\n * Get the number of days in any particular month\n * @link https://stackoverflow.com/a/1433119/1293256\n * @param  {integer} m The month (valid: 0-11)\n * @param  {integer} y The year\n * @return {integer}   The number of days in the month\n */\nvar daysInMonth = function (m, y) {\n  switch (m) {\n    case 1 :\n      return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\n    case 8 : case 3 : case 5 : case 10 :\n      return 30;\n    default :\n      return 31\n  }\n};\n\n/**\n * Check if a date is valid\n * @link https://stackoverflow.com/a/1433119/1293256\n * @param  {[type]}  y The year\n * @param  {[type]}  m The month\n * @param  {[type]}  d The day\n * @return {Boolean}   Returns true if valid\n */\nvar isValidDate = function (y, m, d) {\n  m = parseInt(m, 10) - 1;\n  return m >= 0 && m < 12 && d > 0 && d <= daysInMonth(m, y);\n};\n\nmodule.exports = {\n  DATE_STRING,\n  dateToDays,\n  isValidDate\n};\n","module.exports = {\n  allowStringComparison: false,\n  includeTimeForTodayString: false,\n  returnCurrentTimeForToday: false,\n  returnEmptyStringForInvalidDate: true\n};\n","function toNodes(r) {\n  var n, v = [];\n  while((n = r.iterateNext())) v.push(n);\n  return v;\n}\n\nfunction getNamespaceAtts(result) {\n  var v = [], n;\n  while((n = result.iterateNext())) {\n    if(n.name.indexOf(':')>0) v.unshift(n);\n  }\n  return v;\n}\n\nfunction toSnapshotResult(nodes, rt, singleItem) {\n  return function() {\n    var idx = 0;\n    return {\n      resultType: rt,\n      singleNodeValue: nodes.length ? singleItem || nodes[0] : null,\n      snapshotLength: nodes.length,\n      snapshotItem: function(i){return nodes[i];},\n      iterateNext: function(){return nodes.length > idx ? nodes[idx++] : null;}\n    };\n  }();\n}\n\nmodule.exports = {\n  getNamespaceAtts,\n  toNodes,\n  toSnapshotResult\n};\n","module.exports = {\n  nodes: function(val) { return { t:'nodes', v:val }; },\n  boolean: function(val) { return { t:'bool', v:val }; },\n  number: function(val) { return { t:'num', v:val }; },\n  string: function(val) { return { t:'str', v:val }; },\n  date: function(val) {\n    if(!(val instanceof Date)) throw new Error('Cannot create date from ' + val + ' (' + (typeof val) + ')');\n    return { t:'date', v:val };\n  }\n};\n","module.exports = require('./engine');\n","require('./date-extensions');\r\nvar ExtendedXPathEvaluator = require('./extended-xpath');\r\nvar openrosaExtensions = require('./openrosa-extensions');\r\nvar config = require('./config');\r\nvar extensions = openrosaExtensions(config);\r\n\r\nfunction OpenrosaXPathEvaluator() {\r\n  var evaluator = new XPathEvaluator();\r\n  return {\r\n    createExpression: evaluator.createExpression,\r\n    createNSResolver: evaluator.createNSResolver,\r\n    evaluate: function (expr, contextPath, namespaceResolver, resultType, result) {\r\n      var wrappedXpathEvaluator = function(v, node, rt) {\r\n        if(resultType < 7 || v.startsWith('//')) resultType = null;\r\n        var wrappedResultType = rt || resultType || XPathResult.ANY_TYPE;\r\n        return evaluator.evaluate(v, node || contextPath, namespaceResolver, wrappedResultType || XPathResult.ANY_TYPE, result);\r\n      };\r\n      var xevaluator = new ExtendedXPathEvaluator(wrappedXpathEvaluator, extensions);\r\n      return xevaluator.evaluate.apply(xevaluator, arguments);\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = (function(){\r\n\r\n  var module = {\r\n    config: config,\r\n    customXPathFunction: extensions.customXPathFunction,\r\n    XPathEvaluator: OpenrosaXPathEvaluator,\r\n\r\n    /**\r\n\t\t * Get the current list of DOM Level 3 XPath window and document objects\r\n\t\t * that are in use.\r\n\t\t *\r\n\t\t * @return {Object} List of DOM Level 3 XPath window and document objects\r\n\t\t *         that are currently in use.\r\n\t\t */\r\n\t\tgetCurrentDomLevel3XPathBindings: function()\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\t'window': {\r\n\t\t\t\t\tXPathException: window.XPathException,\r\n\t\t\t\t\tXPathExpression: window.XPathExpression,\r\n\t\t\t\t\tXPathNSResolver: window.XPathNSResolver,\r\n\t\t\t\t\tXPathResult: window.XPathResult,\r\n\t\t\t\t\tXPathNamespace: window.XPathNamespace\r\n\t\t\t\t},\r\n\t\t\t\t'document': {\r\n\t\t\t\t\tcreateExpression: document.createExpression,\r\n\t\t\t\t\tcreateNSResolver: document.createNSResolver,\r\n\t\t\t\t\tevaluate: document.evaluate\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get the list of DOM Level 3 XPath objects that are implemented by\r\n\t\t * the XPathJS module.\r\n\t\t *\r\n\t\t * @return {Object} List of DOM Level 3 XPath objects implemented by\r\n\t\t *         the XPathJS module.\r\n\t\t */\r\n\t\tcreateDomLevel3XPathBindings: function(options)\r\n\t\t{\r\n      var openrosaEvaluator = new OpenrosaXPathEvaluator(options);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t'document': {\r\n          evaluate: openrosaEvaluator.evaluate\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Bind DOM Level 3 XPath interfaces to the DOM.\r\n\t\t *\r\n\t\t * @param {Object} doc the document or (Document.prototype!) to bind the evaluator etc. to\r\n\t\t * @return List of original DOM Level 3 XPath objects that has been replaced\r\n\t\t */\r\n\t\tbindDomLevel3XPath: function(doc, bindings)\r\n\t\t{\r\n\t\t\tvar newBindings = (bindings || module.createDomLevel3XPathBindings()),\r\n\t\t\t\tcurrentBindings = module.getCurrentDomLevel3XPathBindings(),\r\n\t\t\t\ti\r\n\t\t\t;\r\n\r\n\t\t\tdoc = doc || document;\r\n\r\n\t\t\tfor(i in newBindings['document'])\r\n\t\t\t{\r\n\t\t\t\tdoc[i] = newBindings['document'][i];\r\n\t\t\t}\r\n\r\n\t\t\treturn currentBindings;\r\n\t\t}\r\n  };\r\n\treturn module;\r\n\r\n})();\r\n","/**\n * Converts a native Date UTC String to a RFC 3339-compliant date string with local offsets\n * used in ODK, so it replaces the Z in the ISOstring with a local offset\n * @return {string} a datetime string formatted according to RC3339 with local offset\n */\nDate.prototype.toISOLocalString = function() {\n  //2012-09-05T12:57:00.000-04:00 (ODK)\n\n  if(this.toString() === 'Invalid Date') {\n    return this.toString();\n  }\n\n  var dt = new Date(this.getTime() - (this.getTimezoneOffset() * 60 * 1000)).toISOString()\n      .replace('Z', this.getTimezoneOffsetAsTime());\n\n  if(dt.indexOf('T00:00:00.000') > 0) {\n    return dt.split('T')[0];\n  } else {\n    return dt;\n  }\n};\n\nDate.prototype.getTimezoneOffsetAsTime = function() {\n  var offsetMinutesTotal;\n  var hours;\n  var minutes;\n  var direction;\n  var pad2 = function(x) {\n    return (x < 10) ? '0' + x : x;\n  };\n\n  if(this.toString() === 'Invalid Date') {\n    return this.toString();\n  }\n\n  offsetMinutesTotal = this.getTimezoneOffset();\n\n  direction = (offsetMinutesTotal < 0) ? '+' : '-';\n  hours = pad2(Math.floor(Math.abs(offsetMinutesTotal / 60)));\n  minutes = pad2(Math.floor(Math.abs(offsetMinutesTotal % 60)));\n\n  return direction + hours + ':' + minutes;\n};\n","var config = require('./config');\nvar shuffle = require('./utils/shuffle');\nvar {isNamespaceExpr, handleNamespaceExpr} = require('./utils/ns');\nvar {handleOperation} = require('./utils/operation');\nvar {isNativeFunction, preprocessNativeArgs} = require('./utils/native');\nvar {DATE_STRING, dateToDays} = require('./utils/date');\nvar {toNodes, toSnapshotResult} = require('./utils/result');\nvar {inputArgs, preprocessInput} = require('./utils/input');\nvar xpr = require('./xpr');\n/*\n * From http://www.w3.org/TR/xpath/#section-Expressions XPath infix\n * operator precedence is left-associative, and as follows:\n */\nvar OP_PRECEDENCE = [\n  ['|'],\n  ['&'],\n  ['=', '!='],\n  ['<', '<=', '>=', '>'],\n  ['+', '-'],\n  ['*', '/', '%']\n];\n\nvar DIGIT = /[0-9]/;\nvar FUNCTION_NAME = /^[a-z]/;\nvar NUMERIC_COMPARATOR = /(>|<)/;\nvar BOOLEAN_COMPARATOR = /(=)/;\nvar BOOLEAN_FN_COMPARATOR = /(true\\(\\)|false\\(\\))/;\nvar COMPARATOR = /(=|<|>)/;\n\nvar INVALID_ARGS = new Error('invalid args');\nvar TOO_MANY_ARGS = new Error('too many args');\nvar TOO_FEW_ARGS = new Error('too few args');\n\n// TODO remove all the checks for cur.t==='?' - what else woudl it be?\nvar ExtendedXPathEvaluator = function(wrapped, extensions) {\n  var\n    extendedFuncs = extensions.func || {},\n    extendedProcessors = extensions.process || {},\n    toInternalResult = function(r) {\n      var n, v;\n      if(r.resultType === XPathResult.NUMBER_TYPE) return { t:'num', v:r.numberValue };\n      if(r.resultType === XPathResult.BOOLEAN_TYPE) return {  t:'bool', v:r.booleanValue };\n      if(r.resultType === XPathResult.UNORDERED_NODE_ITERATOR_TYPE) {\n        v = [];\n        while((n = r.iterateNext())) v.push(n.textContent);\n        return { t:'arr', v:v };\n      }\n      return { t:'str', v:r.stringValue };\n    },\n    toExternalResult = function(r, rt) {\n      if(extendedProcessors.toExternalResult) {\n        var res = extendedProcessors.toExternalResult(r);\n        if(res) return res;\n      }\n\n      // returns promise\n      if(r.v && typeof r.v.then === 'function' && rt === XPathResult.STRING_TYPE) {\n        return {resultType: XPathResult.STRING_TYPE, stringValue: r.v};\n      }\n\n      if((r.t === 'arr' && rt === XPathResult.NUMBER_TYPE && DATE_STRING.test(r.v[0])) ||\n          (r.t === 'str' && rt === XPathResult.NUMBER_TYPE && DATE_STRING.test(r.v))) {\n        var val = r.t === 'arr' ? r.v[0] : r.v;\n        var days = dateToDays(val);\n        return {\n          resultType:XPathResult.NUMBER_TYPE,\n          numberValue:days,\n          stringValue:days\n        };\n      }\n\n      if(r.t === 'num') return { resultType:XPathResult.NUMBER_TYPE, numberValue:r.v, stringValue:r.v.toString() };\n      if(r.t === 'bool')return { resultType:XPathResult.BOOLEAN_TYPE, booleanValue:r.v, stringValue:r.v.toString() };\n\n      if(rt > 3) {\n        r = shuffle(r[0], r[1]);\n        return toSnapshotResult(r, rt);\n      }\n\n      if(!r.t && Array.isArray(r)) {\n        if(rt === XPathResult.NUMBER_TYPE) {\n          var v = parseInt(r[0].textContent);\n          return { resultType:XPathResult.NUMBER_TYPE, numberValue:v, stringValue:v.toString() };\n        } else if(rt === XPathResult.STRING_TYPE) {\n          return { resultType:XPathResult.STRING_TYPE, stringValue: r.length ? r[0] : '' };\n        }\n      }\n\n      return { resultType:XPathResult.STRING_TYPE, stringValue: r.v===null ? '' : r.v.toString() };\n    },\n    callFn = function(name, args, rt) {\n      if(extendedFuncs.hasOwnProperty(name)) {\n        // if(rt && (/^(date|true|false|now$|today$|randomize$)/.test(name))) args.push(rt);\n        if(rt && (/^(date|now$|today$|randomize$)/.test(name))) args.push(rt);\n        if(/^(true$|false$)/.test(name)) args.push(rt || XPathResult.BOOLEAN_TYPE);\n        return callExtended(name, args);\n      }\n\n      if(name === 'normalize-space' && args.length) {\n        var res = args[0].v;\n        res = res.replace(/\\f/g, '\\\\f');\n        res = res.replace(/\\r\\v/g, '\\v');\n        res = res.replace(/\\v/g, '\\\\v');\n        res = res.replace(/\\s+/g, ' ');\n        res = res.replace(/^\\s+|\\s+$/g, '');\n        res = res.replace(/\\\\v/g, '\\v');\n        res = res.replace(/\\\\f/g, '\\f');\n        return {t: 'str', v: res};\n      }\n\n      if(name === 'string' && args.length > 0 && (\n        args[0].v === Number.POSITIVE_INFINITY ||\n        args[0].v === Number.NEGATIVE_INFINITY ||\n        args[0].v !== args[0].v )) {//NaN\n        return { t:'str', v: args[0].v };\n      }\n      return callNative(name, preprocessNativeArgs(name, args));\n    },\n    callExtended = function(name, args) {\n      var argVals = [], res, i;\n      for(i=0; i<args.length; ++i) argVals.push(args[i]);\n      res = extendedFuncs[name].apply(null, argVals);\n      return res;\n    },\n    callNative = function(name, args) {\n      var argString = '', arg, quote, i;\n      for(i=0; i<args.length; ++i) {\n        arg = args[i];\n        if(arg.t !== 'num' && arg.t !== 'bool') {\n          quote = arg.v.indexOf('\"') === -1 ? '\"' : \"'\";\n          argString += quote;\n        }\n        argString += arg.v;\n        if(arg.t === 'bool') argString += '()';\n        if(arg.t !== 'num' && arg.t !== 'bool') argString += quote;\n        if(i < args.length - 1) argString += ', ';\n      }\n      return toInternalResult(wrapped(name + '(' + argString + ')'));\n    },\n    typefor = function(val) {\n      if(extendedProcessors.typefor) {\n        var res = extendedProcessors.typefor(val);\n        if(res) return res;\n      }\n      if(typeof val === 'boolean') return 'bool';\n      if(typeof val === 'number') return 'num';\n      return 'str';\n    };\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate\n   */\n  this.evaluate = function(input, cN, nR, rT) {\n    input = preprocessInput(input, rT);\n    if(isNamespaceExpr(input)) return handleNamespaceExpr(input, cN);\n\n    if(isNativeFunction(input)\n      && input.indexOf('[selected(') < 0\n      && !(input.startsWith('/') && input.indexOf(' ')>0)\n      && input !== '/') {\n      var args = inputArgs(input);\n      if(args.length && args[0].length && !isNaN(args[0])) { throw INVALID_ARGS; }\n      if(input === 'lang()') throw TOO_FEW_ARGS;\n      if(/^lang\\(/.test(input) && cN.nodeType === 2) cN = cN.ownerElement;\n      var res = wrapped(input, cN);\n      if(rT === XPathResult.NUMBER_TYPE &&\n        (res.resultType === XPathResult.UNORDERED_NODE_ITERATOR_TYPE ||\n         res.resultType === XPathResult.UNORDERED_NODE_ITERATOR_TYPE)) {\n        var val = parseInt(res.iterateNext().textContent);\n        return {\n          resultType: XPathResult.NUMBER_TYPE,\n          numberValue: val,\n          stringValue: val\n        };\n      }\n      if(rT === XPathResult.STRING_TYPE && res.resultType === XPathResult.STRING_TYPE &&\n        res.stringValue.startsWith('<xpath:')) {\n        return {\n          resultType: XPathResult.STRING_TYPE,\n          stringValue: res.stringValue.substring(7, res.stringValue.length-1)\n        }\n      }\n      if(rT === XPathResult.STRING_TYPE && res.resultType >= 6) {\n        if(res.snapshotLength) {\n          var firstNode = res.snapshotItem(0);\n          return { resultType: rT, stringValue: firstNode.textContent };\n        }\n        return { resultType: rT, stringValue: '' };\n      }\n      if(rT === XPathResult.STRING_TYPE && res.resultType >= 4) {\n          var firstNode = res.iterateNext();\n          var firstNodeValue =  firstNode ? firstNode.textContent : '';\n          return { resultType: rT, stringValue: firstNodeValue };\n      }\n      if(rT === XPathResult.BOOLEAN_TYPE && res.resultType >= 4) {\n        var firstNode = res.iterateNext();\n        return { resultType: rT, booleanValue: firstNode ? true : false };\n      }\n      if(rT === XPathResult.STRING_TYPE && res.resultType === XPathResult.NUMBER_TYPE) {\n        return { resultType: rT, stringValue: res.numberValue.toString() };\n      }\n      return res;\n    }\n\n    if((rT > 3 && !input.startsWith('randomize')) ||\n      /^count\\(|boolean\\(/.test(input)) {\n\n      if(input.startsWith('count(')) {\n        if(input.indexOf(',') > 0) throw TOO_MANY_ARGS;\n        if(input === 'count()') throw TOO_FEW_ARGS;\n        if(!isNaN(/\\((.*)\\)/.exec(input)[1])) throw INVALID_ARGS;//firefox\n      }\n      if(input.startsWith('boolean(')) { //firefox\n        if(input === 'boolean()') throw TOO_FEW_ARGS;\n        var bargs = input.substring(8, input.indexOf(')')).split(',');\n        if(bargs.length > 1) throw TOO_MANY_ARGS;\n      }\n      if(input === '/') cN = cN.ownerDocument || cN;\n\n      var selectedExprIdx = input.indexOf('[selected(');\n      if(selectedExprIdx > 0) {\n        var selectedExpr = input.substring(0, selectedExprIdx);\n        var selection = input.substring(selectedExprIdx+10, input.indexOf(')]'));\n        var selectionExpr = selection.split(',').map(s => s.trim());\n        var selectionResult = wrapped(`${selectionExpr[0]}/text()`)\n        if(selectionResult.snapshotLength) {\n          var values = selectionResult.snapshotItem(0)\n            .textContent.split(' ').map(v => `${selectionExpr[1]}=\\\"${v}\\\"`);\n          return wrapped(`${selectedExpr}[${values.join(' or ')}]`)\n        }\n        return toSnapshotResult([], rT);\n      }\n\n      const res = wrapped(input, cN, nR, rT);\n      if(rT === XPathResult.STRING_TYPE && res.resultType === XPathResult.NUMBER_TYPE) {\n        return {\n          type: XPathResult.STRING_TYPE,\n          stringValue: xx.numberValue.toString()\n        }\n      }\n      return res;\n    }\n\n    if(rT === XPathResult.BOOLEAN_TYPE &&\n        input.indexOf('(') < 0 &&\n        input.indexOf('/') < 0 &&\n        input.indexOf('=') < 0 &&\n        input.indexOf('!=') < 0) {\n      input = input.replace(/(\\n|\\r|\\t)/g, '');\n      input = input.replace(/\"(\\d)\"/g, '$1');\n      input = input.replace(/'(\\d)'/g, '$1');\n      input = `boolean-from-string(${input})`;\n    }\n\n    if(rT === XPathResult.NUMBER_TYPE && input.indexOf('string-length') < 0) {\n      input = input.replace(/(\\n|\\r|\\t)/g, '');\n    }\n\n    var i, cur, stack = [{ t:'root', tokens:[] }],\n      peek = function() { return stack[stack.length-1]; },\n      err = function(message) { throw new Error((message||'') + ' [stack=' + JSON.stringify(stack) + '] [cur=' + JSON.stringify(cur) + ']'); },\n      newCurrent = function() { cur = { t:'?', v:'' }; },\n      pushOp = function(t) {\n        peek().tokens.push({ t:'op', v:t });\n        newCurrent();\n      },\n      evalOp = function(lhs, op, rhs) {\n        if(extendedProcessors.handleInfix) {\n          var res = extendedProcessors.handleInfix(err, lhs, op, rhs);\n          if(res && res.t === 'continue') {\n            lhs = res.lhs; op = res.op; rhs = res.rhs; res = null;\n          }\n\n          if(typeof res !== 'undefined' && res !== null) return res;\n        }\n        return handleOperation(lhs, op, rhs, config);\n      },\n      evalOpAt = function(tokens, opIndex) {\n        var res = evalOp(\n            tokens[opIndex - 1],\n            tokens[opIndex],\n            tokens[opIndex + 1]);\n\n        if(typeof res !== 'undefined' && res !== null) {\n          tokens.splice(opIndex, 2);\n          tokens[opIndex - 1] = { t:typefor(res), v:res };\n        }\n      },\n      backtrack = function() {\n        // handle infix operators\n        var i, j, ops, tokens;\n        tokens = peek().tokens;\n        for(j=OP_PRECEDENCE.length-1; j>=0; --j) {\n          ops = OP_PRECEDENCE[j];\n          i = 1;\n          while(i < tokens.length-1) {\n            if(tokens[i].t === 'op' && ops.indexOf(tokens[i].v) !== -1) {\n              evalOpAt(tokens, i);\n            } else ++i;\n          }\n        }\n      },\n      handleXpathExpr = function(returnType) {\n        var expr = cur.v;\n        var evaluated;\n        if(['position'].includes(peek().v)) {\n          evaluated = wrapped(expr);\n        } else {\n          if(rT > 3 || (cur.v.indexOf('position()=') >= 0 &&\n            stack.length === 1 && !/^[a-z]*[(|[]{1}/.test(cur.v))) {\n            evaluated = toNodes(wrapped(expr, cN, returnType));\n          } else {\n            if(expr.startsWith('$')) {\n              evaluated = expr;\n            } else {\n              evaluated = toInternalResult(wrapped(expr, cN, returnType));\n            }\n          }\n        }\n        peek().tokens.push(evaluated);\n        newCurrent();\n      },\n      nextChar = function() {\n        return input.charAt(i+1);\n      },\n      finaliseNum = function() {\n        cur.v = parseFloat(cur.string);\n        peek().tokens.push(cur);\n        newCurrent();\n      },\n      prevToken = function() {\n        var peeked = peek().tokens;\n        return peeked[peeked.length - 1];\n      },\n      isNum = function(c) {\n        return c >= '0' && c <= '9';\n      };\n\n    newCurrent();\n\n    for(i=0; i<input.length; ++i) {\n      var c = input.charAt(i);\n      if(cur.sq) {\n        cur.v += c;\n        if(c === ']') --cur.sq;\n        else if(c === '[') ++cur.sq;\n        continue;\n      }\n      if(cur.t === 'str') {\n        if(c === cur.quote) {\n          peek().tokens.push(cur);\n          newCurrent();\n        } else cur.v += c;\n        continue;\n      }\n      if(cur.t === 'num') {\n        if(DIGIT.test(c) || ['e', '\"', \"'\"].includes(c) ||\n            (c === '-' && input[i-1] === 'e')) {\n          cur.string += c;\n          continue;\n        } else if(c === ' ' && cur.string === '-') {\n          continue;\n        } else if(c === '.' && !cur.decimal) {\n          cur.decimal = 1;\n          cur.string += c;\n        } else finaliseNum();\n      }\n      if(isNum(c)) {\n        if(cur.v === '') {\n          cur = { t:'num', string:c };\n        } else cur.v += c;\n      } else switch(c) {\n        case \"'\":\n        case '\"':\n          if(cur.v === '') {\n            cur = { t:'str', quote:c, v:'' };\n          } else err('Not sure how to handle: ' + c);\n          break;\n        case '(':\n          cur.t = 'fn';\n          cur.tokens = [];\n          stack.push(cur);\n          if(cur.v === 'once') {\n            newCurrent();\n            cur.v = '.';\n            handleXpathExpr();\n          }\n          newCurrent();\n\n          break;\n        case ')':\n          if(nextChar() === '[') {\n            // collapse the stack, and let the native evaluator handle this...\n            var tail = stack.pop();\n            tail.v = tail.v + '(' + cur.v + c;\n            tail.t = '?';\n            cur = tail;\n            break;\n          }\n\n          var returnType = input.startsWith('randomize') ? 4 : null;\n          if(cur.v !== '') handleXpathExpr(returnType);\n\n          backtrack();\n          cur = stack.pop();\n\n          if(cur.t !== 'fn') err();\n          if(cur.v) {\n            var expectedReturnType = rT;\n            if(rT === XPathResult.BOOLEAN_TYPE) {\n              if(NUMERIC_COMPARATOR.test(input) && !BOOLEAN_FN_COMPARATOR.test(input)) expectedReturnType = XPathResult.NUMBER_TYPE;\n              if(BOOLEAN_COMPARATOR.test(input)) expectedReturnType = XPathResult.BOOLEAN_TYPE;\n              if(COMPARATOR.test(input) && cur.t === 'fn' && /^(date|date-time)$/.test(cur.v)) {\n                expectedReturnType = XPathResult.STRING_TYPE;\n              }\n            }\n            var res = callFn(cur.v, cur.tokens, expectedReturnType);\n            if(cur.v === 'node' && res.t === 'arr' && res.v.length > 0)\n              res.v = [res.v[0]]; // only interested in first element\n            peek().tokens.push(res);\n          } else {\n            if(cur.tokens.length !== 1) err();\n            peek().tokens.push(cur.tokens[0]);\n          }\n          newCurrent();\n          break;\n        case ',':\n          if(cur.v !== '') handleXpathExpr();\n          if(peek().t !== 'fn') err();\n          break;\n        case '*':\n          if(c === '*' && (cur.v !== '' || peek().tokens.length === 0)) {\n            cur.v += c;\n            if(cur.v === './*') handleXpathExpr();\n          } else if(cur.v === '' &&\n            ([')', ''].includes(nextChar()) ||\n            input.substring(i+1).trim() === ')')) {\n            cur.v = c;\n            handleXpathExpr();\n          } else {\n            pushOp(c);\n          }\n          break;\n        case '-':\n          var prev = prevToken();\n          if(cur.v !== '' && nextChar() !== ' ' && input.charAt(i-1) !== ' ') {\n            // function name expr\n            cur.v += c;\n          } else if((peek().tokens.length === 0 && cur.v === '') ||\n            (prev && prev.t === 'op') ||\n            // two argument function\n            (prev && prev.t === 'num' && stack.length > 1 && stack[1].t === 'fn') ||\n            // negative argument\n            (prev && prev.t !== 'num' && isNum(nextChar()))) {\n            // -ve number\n            cur = { t:'num', string:'-' };\n          } else {\n            if(cur.v !== '') {\n              if(!DIGIT.test(cur.v) && input[i-1] !== ' ') throw INVALID_ARGS;\n              peek().tokens.push(cur);\n            }\n            pushOp(c);\n          }\n          break;\n        case '=':\n          if(cur.v === '<' || cur.v === '&lt;' ||\n              cur.v === '>' || cur.v === '&gt;' || cur.v === '!') {\n            cur.v += c;\n            switch(cur.v) {\n              case '<=': case '&lt;=': pushOp('<='); break;\n              case '>=': case '&gt;=': pushOp('>='); break;\n              case '!=':               pushOp('!='); break;\n            }\n          } else {\n            if(cur.v) handleXpathExpr();\n            pushOp(c);\n          }\n          break;\n        case ';':\n          switch(cur.v) {\n            case '&lt': cur.v = ''; c = '<'; break;\n            case '&gt': cur.v = ''; c = '>'; break;\n            default: cur.v += c; continue;\n          }\n          /* falls through */\n        case '>':\n        case '<':\n          if(cur.v) handleXpathExpr();\n          if(nextChar() === '=') {\n            cur.v = c; break;\n          }\n          /* falls through */\n        case '+':\n          pushOp(c);\n          break;\n        case ' ':\n          switch(cur.v) {\n            case '': break; // trim leading whitespace\n            case 'mod': pushOp('%'); break;\n            case 'div': pushOp('/'); break;\n            case 'and': pushOp('&'); break;\n            case 'or':  pushOp('|'); break;\n            default: {\n              var op = cur.v.toLowerCase();\n              if(/^(mod|div|and|or)$/.test(op)) throw INVALID_ARGS;\n              if(!FUNCTION_NAME.test(cur.v)) handleXpathExpr();\n            }\n          }\n          break;\n        case '[':\n          cur.sq = (cur.sq || 0) + 1;\n          /* falls through */\n        case '.':\n          if(cur.v === '' && nextChar() === ')') {\n            cur.v = c;\n            handleXpathExpr();\n            break;\n          }\n          if(cur.v === '' && isNum(nextChar())) {\n            cur = { t:'num', string:c };\n            break;\n          }\n          /* falls through */\n        default:\n          cur.v += c;\n      }\n    }\n    if(cur.t === 'num') finaliseNum();\n    if(cur.t === '?' && cur.v !== '') handleXpathExpr();\n    if(cur.t !== '?' || cur.v !== '' || (cur.tokens && cur.tokens.length)) err('Current item not evaluated!');\n    if(stack.length > 1) err('Stuff left on stack.');\n    if(stack[0].t !== 'root') err('Weird stuff on stack.');\n    if(stack[0].tokens.length === 0) err('No tokens.');\n    if(stack[0].tokens.length >= 3) backtrack();\n    if(stack[0].tokens.length > 1) err('Too many tokens.');\n    return toExternalResult(stack[0].tokens[0], rT);\n  };\n\n};\n\nmodule.exports = ExtendedXPathEvaluator;\n","var MAX_INT32 = 2147483647;\nvar MINSTD = 16807;\n\n/**\n * Performs the \"inside-out\" variant of the Fisher-Yates array shuffle.\n *\n * @see https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_%22inside-out%22_algorithm\n *\n * @param  {<*>}        array the array to shuffle\n * @param  {number=}    seed the seed value\n * @return {<*>}        the suffled array\n */\nfunction shuffle(array, seed) {\n  var rng;\n  var result = [];\n\n  if(typeof seed !== 'undefined'){\n    if(!Number.isInteger(seed)) {\n      throw new Error('Invalid seed argument. Integer required.');\n    }\n    var rnd = new Random(seed);\n    rng = rnd.nextFloat.bind(rnd);\n  } else {\n    rng = Math.random;\n  }\n\n  for (var i = 0; i < array.length; ++i) {\n    var j = Math.floor(rng() * (i + 1));\n    if(j !== i) {\n      result[i] = result[j];\n    }\n    result[j] = array[i];\n  }\n  return result;\n}\n\n/**\n * Creates a the Park-Miller PRNG pseudo-random value generator.\n * The seed must be an integer.\n *\n * Adapted from: https://gist.github.com/blixt/f17b47c62508be59987b\n */\nfunction Random(seed) {\n    this._seed = seed % MAX_INT32;\n\tif(this._seed <= 0) {\n\t\tthis._seed += (MAX_INT32 - 1);\n\t}\n}\n\n/**\n * Returns a pseudo-random integer value.\n */\nRandom.prototype.next = function () {\n  this._seed = this._seed * MINSTD % MAX_INT32;\n  return this._seed;\n};\n\n/**\n * Returns a pseudo-random floating point number in range [0, 1).\n */\nRandom.prototype.nextFloat = function () {\n    // We know that result of next() will be 1 to 2147483646 (inclusive).\n    return (this.next() - 1) / (MAX_INT32 - 1);\n};\n\nmodule.exports = shuffle;\n","var {toSnapshotResult} = require('./result');\n\nfunction namespace(input, cN) {\n  var nsId = input.substring(11);\n  var xnamespaces = [];\n  var xitems = [];\n  if(cN.attributes) {\n    for(var ii=0; ii<cN.attributes.length; ii++) {\n      var xattr = cN.attributes[ii];\n      var xitem = xattr.ownerElement.getAttributeNode(xattr.name);\n      if(xitem.nodeName === 'xmlns:'+nsId) {\n        xitems.push(xitem);\n        xnamespaces.push({\n          nodeName: '#namespace',\n          localName: nsId,\n          namespaceURI: xitem.nodeValue\n        });\n      }\n    }\n  }\n  return toSnapshotResult(xnamespaces);\n}\n\nfunction namespaceNode(cN) {\n  var namespaces = [];\n  var namespaceKeys = {};\n  var items = [];\n  var node = cN;\n  while(node) {\n    if(node.attributes) {\n      for(var j=0; j<node.attributes.length; j++) {\n        var attr = node.attributes[j];\n        var item = attr.ownerElement.getAttributeNode(attr.name);\n        if(item.nodeName.startsWith('xmlns') && !namespaceKeys[item.nodeName]) {\n          var names = item.nodeName.split(':');\n          namespaceKeys[item.nodeName] = item.nodeName;\n          if(item.nodeValue.length) {\n            items.push(item);\n            namespaces.push({\n              nodeName: '#namespace',\n              localName: names.length > 1 ? names[1] : '',\n              namespaceURI: item.nodeValue\n            });\n          }\n        }\n      }\n    }\n    node = cN.nodeType === 1 ? node.parentNode : null;\n  }\n  if(namespaces.length > 0 && !namespaceKeys.xmlns) {\n    namespaces.push({nodeName: '#namespace', localName: 'xmlns', namespaceURI: 'http://www.w3.org/1999/xhtml'});\n  }\n  if(namespaces.length > 0 && !namespaceKeys.xml) {\n    namespaces.push({nodeName: '#namespace', localName: 'xml', namespaceURI: 'http://www.w3.org/XML/1998/namespace'});\n  }\n  namespaces = namespaces.sort(function(n1, n2){\n    if(n1.localName < n2.localName){ return -1;}\n    if(n1.localName > n2.localName){ return 1;}\n    return 0;\n  });\n  return toSnapshotResult(namespaces, 7, items[0]);\n}\n\nfunction isNamespaceExpr(input) {\n  return /^(namespace::node\\(\\)|namespace::\\*)$/.test(input)\n    || /^namespace::/.test(input);\n}\n\nfunction handleNamespaceExpr(input, cN) {\n  if(/^(namespace::node\\(\\)|namespace::\\*)$/.test(input)) {\n    return namespaceNode(cN);\n  }\n\n  if(/^namespace::/.test(input)) {\n    return namespace(input, cN);\n  }\n}\n\nmodule.exports = {\n  isNamespaceExpr,\n  handleNamespaceExpr\n};\n","var {dateToDays} = require('./date');\n\nfunction isNumber(value) {\n  if(typeof value === 'string') {\n    var nbr = value.replace(/[\"']/g, \"\");\n    // return nbr.trim().length && /^\\d+$/.test(nbr.trim());\n    return nbr.trim().length && !isNaN(nbr.trim());\n  }\n  return typeof value === 'number';\n}\n\nfunction handleOperation(lhs, op, rhs, config) {\n  //Removes quotes for numbers\n  if(op.v === '+' && isNumber(lhs.v) && isNumber(rhs.v)) {\n    lhs.v = Number(lhs.v);\n    rhs.v = Number(rhs.v);\n  }\n\n  //Comparing node expressions with numbers/strings/etc\n  if(lhs.t === 'arr' && lhs.v.length === 1 && rhs.t === 'num') {\n    if (/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(lhs.v[0])) {\n      lhs = {t: 'num', v: dateToDays(lhs.v[0], false)};\n    }\n  }\n  if(rhs.t === 'arr' && rhs.v.length === 1 && lhs.t === 'num') {\n    if (/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(rhs.v[0])) {\n      rhs = {t: 'num', v: dateToDays(rhs.v[0], false)};\n    }\n  }\n\n  if(lhs.t === 'arr' && lhs.v.length === 1 && rhs.t === 'str') {\n    lhs = {t: 'str', v: lhs.v[0]};\n  }\n  if(rhs.t === 'arr' && rhs.v.length === 1 && lhs.t === 'str') {\n    rhs = {t: 'str', v: rhs.v[0]};\n  }\n  if(rhs.t === 'arr' && rhs.v.length === 1 &&\n    lhs.t === 'arr' && lhs.v.length === 1) {\n    lhs = {t: 'str', v: lhs.v[0]};\n    rhs = {t: 'str', v: rhs.v[0]};\n  }\n\n  if(lhs.t === 'str' && /^\\d\\d\\d\\d-\\d{1,2}-\\d{1,2}/.test(lhs.v)) {\n    lhs = {t: 'num', v: dateToDays(lhs.v, false)};\n  }\n\n  if(rhs.t === 'str' && /^\\d\\d\\d\\d-\\d{1,2}-\\d{1,2}/.test(rhs.v)) {\n    rhs = {t: 'num', v: dateToDays(rhs.v, false)};\n  }\n\n  if(op.v === '-' && (isNaN(lhs.v) || isNaN(rhs.v))) {\n    return NaN;\n  }\n\n  if(/^(=|!=)$/.test(op.v)) {\n    if(lhs.t === 'str' && rhs.t === 'bool') {\n      if(lhs.v.length > 0 && lhs.v === '1') {\n        lhs = {t: 'bool', v: true};\n      } else if(lhs.v === '') {\n        lhs = {t: 'bool', v: false};\n      } else {\n        lhs = {t: 'bool', v: undefined};\n      }\n    }\n    if(rhs.t === 'str' && lhs.t === 'bool') {\n      if(rhs.v.length > 0 && rhs.v === '1') {\n        rhs = {t: 'bool', v: true};\n      } else if(rhs.v === '') {\n        rhs = {t: 'bool', v: false};\n      } else {\n        rhs = {t: 'bool', v: undefined};\n      }\n    }\n\n    if(lhs.t === 'num' && rhs.t === 'bool') {\n      lhs = {t: 'bool', v: Boolean(lhs.v)};\n    }\n    if(rhs.t === 'num' && lhs.t === 'bool') {\n      rhs = {t: 'bool', v: Boolean(rhs.v)};\n    }\n  }\n\n  switch(op.v) {\n    case '+':  return lhs.v + rhs.v;\n    case '-':  return lhs.v - rhs.v;\n    case '*':  return lhs.v * rhs.v;\n    case '/':  return lhs.v / rhs.v;\n    case '%':  return lhs.v % rhs.v;\n    case '=':\n      if(/^(num|str)$/.test(lhs.t) && rhs.t === 'arr') {return rhs.v.includes(lhs.string || lhs.v);}\n      if(/^(num|str)$/.test(rhs.t) && lhs.t === 'arr') {return lhs.v.includes(rhs.string || rhs.v);}\n      if(lhs.t === 'bool' && rhs.t === 'arr') {return lhs.v === rhs.v.length > 0;}\n      if(rhs.t === 'bool' && lhs.t === 'arr') {return rhs.v === lhs.v.length > 0;}\n\n      return lhs.v == rhs.v;\n    case '<':\n      if(lhs.t === 'bool') {\n        if(lhs.v === false && rhs.t === 'arr' && rhs.v.length > 0) return true;\n        if(lhs.v === true && rhs.t === 'num') return 1 < rhs.v;\n        if(lhs.v === false && rhs.t === 'num') return 0 < rhs.v;\n        if(lhs.v === false && rhs.t === 'bool') return rhs.v === true;\n        return false;\n      }\n      if(rhs.t === 'bool') {\n        if(rhs.v === true && lhs.t === 'arr' && lhs.v.length === 0) return true;\n        if(rhs.v === true && lhs.t === 'num' && lhs.v < 1) return true;\n        return false;//rhs = {t: 'num', v: rhs.v === true ? 1 : 0, string: rhs.v === true ? '1' : '0'};\n      }\n\n      if(lhs.t === 'arr' && lhs.v.length > 0) {\n        for(var iii=0;iii<lhs.v.length;iii++) {\n          if(Number(lhs.v[iii]) < rhs.v) return true;\n        }\n        return false;\n      }\n      if(rhs.t === 'arr' && rhs.v.length > 0) {\n        for(var k=0;k<rhs.v.length;k++) {\n          if(lhs.v < Number(rhs.v[k])) return true;\n        }\n        return false;\n      }\n      if(lhs.t === 'arr' && lhs.v.length===0) lhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'arr' && rhs.v.length===0) rhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'str' && rhs.t === 'str' && config.allowStringComparison) return lhs.v < rhs.v;\n      if(!isNumber(lhs.v) || !isNumber(rhs.v)) return false;\n      return lhs.v < rhs.v;\n    case '>':\n      if(lhs.t === 'bool') {\n        if(lhs.v === true && rhs.t === 'arr' && rhs.v.length === 0) return true;\n        if(lhs.v === true && rhs.t === 'num') return 1 > rhs.v;\n        if(lhs.v === true && rhs.t === 'bool') return 1 > (rhs.v === true ?  1 : 0);\n        return false;//lhs = {t: 'num', v: lhs.v === true ? 1 : 0, string: lhs.v === true ? '1' : '0'};\n      }\n      if(rhs.t === 'bool') {\n        if(rhs.v === false && lhs.t === 'arr' && lhs.v.length > 0) return true;\n        if(rhs.v === false && lhs.t === 'num') return lhs.v > 0;\n        if(rhs.v === true && lhs.t === 'num') return lhs.v > 1;\n        if(lhs.t === 'num') return lhs.v > rhs.v === true ? 1 : 0;\n        return false;\n      }\n\n      if(lhs.t === 'arr' && lhs.v.length > 0) {\n        for(var j=0;j<lhs.v.length;j++) {\n          if(Number(lhs.v[j]) > rhs.v) return true;\n        }\n        return false;\n      }\n      if(rhs.t === 'arr' && rhs.v.length > 0) {\n        for(var l=0;l<rhs.v.length;l++) {\n          if(lhs.v > Number(rhs.v[l])) return true;\n        }\n        return false;\n      }\n\n      if(lhs.t === 'arr' && lhs.v.length===0) lhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'bool' && lhs.v === true) lhs ={t: 'num', string: '1', v: 1};\n      if(lhs.t === 'bool' && lhs.v === false) lhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'arr' && rhs.v.length===0) rhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'bool' && rhs.v === true) rhs ={t: 'num', string: '1', v: 1};\n      if(rhs.t === 'bool' && rhs.v === false) rhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'str' && rhs.t === 'str' && config.allowStringComparison) return lhs.v > rhs.v;\n      if(!isNumber(lhs.v) || !isNumber(rhs.v)) return false;\n      return lhs.v > rhs.v;\n    case '<=':\n      if(rhs.t === 'arr' && rhs.v.length===0 && lhs.string && lhs.string.length>0) return false;\n      if(lhs.t === 'arr' && lhs.v.length===0 && rhs.string && rhs.string.length>0) return false;\n      if(rhs.t === 'bool' && rhs.v === false && lhs.t === 'arr' && lhs.v.length > 0) return false;\n      if(lhs.t === 'bool') lhs = {t: 'num', v: lhs.v === true ? 1 : 0, string: lhs.v === true ? '1' : '0'};\n      if(rhs.t === 'bool') rhs = {t: 'num', v: rhs.v === true ? 1 : 0, string: lhs.v === true ? '1' : '0'};\n\n      if(lhs.t === 'arr' && lhs.v.length > 0) {\n        for(var m=0;m<lhs.v.length;m++) {\n          if(Number(lhs.v[m]) <= rhs.v) return true;\n        }\n        return false;\n      }\n      if(rhs.t === 'arr' && rhs.v.length > 0) {\n        for(var p=0;p<rhs.v.length;p++) {\n          if(lhs.v <= Number(rhs.v[p])) return true;\n        }\n        return false;\n      }\n\n      if(rhs.t === 'arr' && rhs.v.length===0) rhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'arr' && lhs.v.length===0) lhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'bool' && lhs.v === true) lhs ={t: 'num', string: '1', v: 1};\n      if(lhs.t === 'bool' && lhs.v === false) lhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'bool' && rhs.v === true) rhs ={t: 'num', string: '1', v: 1};\n      if(rhs.t === 'bool' && rhs.v === false) rhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'str' && rhs.t === 'str' && config.allowStringComparison) return lhs.v <= rhs.v;\n      if(!isNumber(lhs.v) || !isNumber(rhs.v)) return false;\n      return lhs.v <= rhs.v;\n    case '>=':\n\n      if(rhs.t === 'arr' && rhs.v.length===0 && lhs.string && lhs.string.length>0) return false;\n      if(rhs.t === 'arr' && rhs.v.length > 0 && lhs.v === false) return false;\n      if(lhs.t === 'arr' && lhs.v.length===0) {\n        if(rhs.t === 'str' && rhs.v === '') return false;\n        if(rhs.t === 'str') return rhs.v.length >= 0;\n        return (rhs.v.length >= 0 || rhs.v === false);\n      }\n\n      if(lhs.t === 'bool') lhs = {t: 'num', v: lhs.v === true ? 1 : 0, string: lhs.v === true ? '1' : '0'};\n      if(rhs.t === 'bool') rhs = {t: 'num', v: rhs.v === true ? 1 : 0, string: lhs.v === true ? '1' : '0'};\n\n      if(lhs.t === 'arr' && lhs.v.length>0) {\n        for(var q=0;q<lhs.v.length;q++) {\n          if(Number(lhs.v[q]) >= rhs.v) return true;\n        }\n        return false;\n      }\n\n      if(rhs.t === 'arr' && rhs.v.length>0) {\n        for(var r=0;r<rhs.v.length;r++) {\n          if(lhs.v >= Number(rhs.v[r])) return true;\n        }\n        return false;\n      }\n\n      if(lhs.t === 'arr' && lhs.v.length===0) lhs ={t: 'num', string: '0', v: 0};\n      if(lhs.t === 'bool' && lhs.v === true) lhs ={t: 'num', string: '1', v: 1};\n      if(lhs.t === 'bool' && lhs.v === false) lhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'arr' && rhs.v.length===0) rhs ={t: 'num', string: '0', v: 0};\n      if(rhs.t === 'bool' && rhs.v === true) rhs ={t: 'num', string: '1', v: 1};\n      if(rhs.t === 'bool' && rhs.v === false) rhs ={t: 'num', string: '0', v: 0};\n\n      if(lhs.t === 'str' && rhs.t === 'str' && config.allowStringComparison) return lhs.v >= rhs.v;\n      if(!isNumber(lhs.v) || !isNumber(rhs.v)) return false;\n      return lhs.v >= rhs.v;\n\n    case '!=':\n      if(lhs.t === 'bool' && rhs.t === 'arr') {return lhs.v === rhs.v.length < 1;}\n      if(rhs.t === 'bool' && lhs.t === 'arr') {return rhs.v === lhs.v.length < 1;}\n\n      return lhs.v != rhs.v;\n    case '&':  return Boolean(lhs.v && rhs.v);\n    case '|':  return Boolean(lhs.v || rhs.v);\n  }\n}\n\nmodule.exports = {\n  handleOperation\n};\n","var {DATE_STRING, dateToDays} = require('./date');\n\nvar TOO_MANY_ARGS = new Error('too many args');\nvar TOO_FEW_ARGS = new Error('too few args');\nvar INVALID_ARGS = new Error('invalid args');\n\nvar NATIVE_FUNS = /^id\\(|^\\([1-9]|^\\([a-zA-Z]|lang\\(|local-name|namespace-uri|last\\(|name\\(|child::|parent::|descendant::|descendant-or-self::|ancestor::|ancestor-or-self::sibling|following::|following-sibling::|preceding-sibling::|preceding::|attribute::|^\\/.*$/;\n\nfunction isNativeFunction(input) {\n  return NATIVE_FUNS.test(input);\n}\n\nfunction checkMinMaxArgs(args, min, max) {\n  if(min != null && args.length < min) throw TOO_FEW_ARGS;\n  if(max != null && args.length > max) throw TOO_MANY_ARGS;\n}\n\nfunction checkNativeFn(name, args) {\n  if(name === 'last') {\n    checkMinMaxArgs(args, null, 0);\n  } else if(/^(boolean|lang|ceiling|name|floor)$/.test(name)) {\n    checkMinMaxArgs(args, 1, 1);\n  } else if(/^(number|string|normalize-space|string-length)$/.test(name)) {\n    checkMinMaxArgs(args, null, 1);\n  } else if(name === 'substring') {\n    checkMinMaxArgs(args, 2, 3);\n  } else if(/^(starts-with|contains|substring-before|substring-after)$/.test(name)) {\n    checkMinMaxArgs(args, 2, 2);\n  } else if(name === 'translate') {\n    checkMinMaxArgs(args, 3, 3);\n  }\n}\n\nfunction preprocessNativeArgs(name, args) {\n  if(name === 'number' && args.length) {\n    if(args[0].t === 'arr') {\n      args = [{t: 'num', v: args[0].v[0]}];\n    } else if(args[0].t === 'str' && DATE_STRING.test(args[0].v)) {\n      args = [{t: 'num', v: dateToDays(args[0].v)}];\n    } else if(args[0].t === 'num' && args[0].v.toString().indexOf('e-') > 0) {\n      args = [{t: 'num', v: 0}];\n    }\n  }\n  if(name === 'name' && args.length < 2) throw TOO_FEW_ARGS;\n  if(name === 'namespace-uri') {\n    if(args.length > 1) throw TOO_MANY_ARGS;\n    if(args.length === 0) throw TOO_FEW_ARGS;\n    if(args.length === 1 && !isNaN(args[0].v)) throw INVALID_ARGS;\n  }\n  if(name === 'local-name') {\n    if(args.length > 1) throw TOO_MANY_ARGS;\n    if(args.length === 1 && !isNaN(args[0].v)) throw INVALID_ARGS;\n  }\n\n  if(name === 'substring' && args.length > 2 && args[1].v === Number.NEGATIVE_INFINITY && args[2].v === Number.POSITIVE_INFINITY) {\n    args[0].v = '';\n  }\n\n  if(name === 'substring' && args.length > 1 && args[1].v < 0) {\n    args[1].v = 0;\n  }\n  if(name === 'substring' && args.length > 2 && args[2].v === Number.POSITIVE_INFINITY) {\n    args[2].v = args[0].v.length + 1;\n  }\n  checkNativeFn(name, args);\n  return args;\n}\n\nmodule.exports = {\n  isNativeFunction,\n  preprocessNativeArgs\n};\n","function isOperation(input, rT) {\n  return rT === XPathResult.NUMBER_TYPE && // expects a number result\n    input.indexOf('(') < 0 // not a function based expression\n    && !input.startsWith('/'); // not a path expression\n}\n\nvar ARGS_REGEX = /\\(\\s*([^)]*)\\)$/;\n\nfunction inputArgs(input) {\n  var m = input.match(ARGS_REGEX);\n  return m ? m[1].split(',') : [];\n}\n\nfunction preprocessInput(input, rT) {\n  if(isOperation(input, rT)) {\n    input = input.replace('\\n', ''); //replaces new lines for expressions without functions\n    if(input.indexOf('mod') > 0) { // to support 1mod1 or any weirdness\n      input = input.replace('mod', ' mod ');\n    }\n    if(input.indexOf('div') > 0) { // to support 1div1 or any weirdness\n      input = input.replace('div', ' div ');\n    }\n  }\n\n  if(input === 'string(namespace::node())') {\n    input = input.replace('namespace::node()', 'namespace-uri(/*)');\n  }\n  return input;\n}\n\nmodule.exports = {\n  inputArgs,\n  preprocessInput\n};\n","var {area, distance, areaOrDistance} = require('./geo');\nvar {digest} = require('./digest');\nvar {randomToken} = require('./random-token');\nvar xpr = require('./xpr');\nvar {isValidDate} = require('./utils/date');\n\nvar openrosa_xpath_extensions = function(config) {\n  var\n      TOO_MANY_ARGS = new Error('too many args'),\n      TOO_FEW_ARGS = new Error('too few args'),\n      MILLIS_PER_DAY = 1000 * 60 * 60 * 24,\n      RAW_NUMBER = /^(-?[0-9]+)(\\.[0-9]+)?$/,\n      DATE_STRING = /^\\d\\d\\d\\d-\\d{1,2}-\\d{1,2}(?:T\\d\\d:\\d\\d:\\d\\d\\.?\\d?\\d?(?:Z|[+-]\\d\\d:\\d\\d)|.*)?$/,\n      XPR = xpr,\n      _zeroPad = function(n, len) {\n        len = len || 2;\n        n = n.toString();\n        while(n.length < len) n = '0' + n;\n        return n;\n      },\n      _int = function(r) { return Math.round(_float(r)); },\n      _float = function(r) { return r.t === 'num'? r.v: parseFloat(_str(r)); },\n      _str = function(r) {\n        return r.t === 'arr' ?\n               r.v.length ? r.v[0].toString() : '' :\n            r.v.toString();\n      },\n      _dateToString = function(d) {\n            return d.getFullYear() + '-' + _zeroPad(d.getMonth()+1) + '-' +\n                _zeroPad(d.getDate());\n      },\n      _round = function(num) {\n        if(num < 0) {\n          return -Math.round(-num);\n        }\n        return Math.round(num);\n      },\n      _uuid_part = function(c) {\n        var r = Math.random()*16|0,\n            v = c == 'x' ? r : r&0x3|0x8;\n        return v.toString(16);\n      },\n      _date = function(it, keepTime) {\n        var temp, t;\n        if(it.v instanceof Date) {\n          return new Date(it.v);\n        }\n        it = _str(it);\n        if(RAW_NUMBER.test(it)) {\n          // Create a date at 00:00:00 1st Jan 1970 _in the current timezone_\n          temp = new Date(1970, 0, 1);\n          temp.setDate(1 + parseInt(it, 10));\n          return temp;\n        } else if(DATE_STRING.test(it)) {\n          if(keepTime && it.indexOf('T')>0) return new Date(it);\n          t = it.indexOf('T');\n          if(t !== -1) it = it.substring(0, t);\n          temp = it.split('-');\n          if(isValidDate(temp[0], temp[1], temp[2])) {\n            return new Date(temp[0], temp[1]-1, temp[2]);\n          }\n        }\n        var d = new Date(it);\n        return d == 'Invalid Date' ? null : d;\n      },\n      _dateForReturnType = function(it, rt) {\n        if(rt === XPathResult.BOOLEAN_TYPE) {\n          if(!it) return XPR.boolean(false);\n          return XPR.boolean(!isNaN(new Date(it).getTime()));\n        }\n        if(rt === XPathResult.NUMBER_TYPE) {\n          if(!it) return XPR.number(0);\n          return XPR.number((new Date(it).getTime()) / (1000 * 60 * 60 * 24));\n        }\n        if(rt === XPathResult.STRING_TYPE) {\n          if(!it) {\n            return XPR.string(config.returnEmptyStringForInvalidDate ? '' : 'Invalid Date');\n          }\n          return XPR.string(new Date(it).toISOLocalString());\n        }\n        if(!it) return XPR.string('Invalid Date');\n        return XPR.date(it);\n      },\n      uuid = function() {\n          return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n                  .replace(/[xy]/g, _uuid_part);\n      },\n      date = function(it, rt) {\n        it = _date(it);\n        return _dateForReturnType(it, rt);\n      },\n      format_date = function(date, format) {\n        date = _date(date, true);\n        if(!format) return '';\n        format = _str(format);\n        if(!date) return 'Invalid Date';\n        var c, i, sb = '', f = {\n          year: 1900 + date.getYear(),\n          month: 1 + date.getMonth(),\n          day: date.getDate(),\n          hour: date.getHours(),\n          minute: date.getMinutes(),\n          second: date.getSeconds(),\n          millis: date.getMilliseconds(),\n          secTicks: date.getTime(),\n          dow: 1 + date.getDay(),\n        };\n        var locale = window ? window.enketoFormLocale : undefined;\n\n        for(i=0; i<format.length; ++i) {\n          c = format.charAt(i);\n\n          if (c === '%') {\n            if(++i >= format.length) {\n              throw new Error(\"date format string ends with %\");\n            }\n            c = format.charAt(i);\n\n            if (c === '%') { // literal '%'\n              sb += '%';\n            } else if (c === 'Y') {  //4-digit year\n              sb += _zeroPad(f.year, 4);\n            } else if (c === 'y') {  //2-digit year\n              sb += _zeroPad(f.year, 4).substring(2);\n            } else if (c === 'm') {  //0-padded month\n              sb += _zeroPad(f.month, 2);\n            } else if (c === 'n') {  //numeric month\n              sb += f.month;\n            } else if (c === 'b') {  //short text month\n              sb += date.toLocaleDateString( locale, { month: 'short' } );\n            } else if (c === 'd') {  //0-padded day of month\n              sb += _zeroPad(f.day, 2);\n            } else if (c === 'e') {  //day of month\n              sb += f.day;\n            } else if (c === 'H') {  //0-padded hour (24-hr time)\n              sb += _zeroPad(f.hour, 2);\n            } else if (c === 'h') {  //hour (24-hr time)\n              sb += f.hour;\n            } else if (c === 'M') {  //0-padded minute\n              sb += _zeroPad(f.minute, 2);\n            } else if (c === 'S') {  //0-padded second\n              sb += _zeroPad(f.second, 2);\n            } else if (c === '3') {  //0-padded millisecond ticks (000-999)\n              // sb += _zeroPad(f.secTicks, 3);\n              sb += _zeroPad(f.millis, 3);\n            } else if (c === 'a') {  //Three letter short text day\n              sb += date.toLocaleDateString( locale, { weekday: 'short' } );\n            } else if (c === 'Z' || c === 'A' || c === 'B') {\n              throw new Error('unsupported escape in date format string [%' + c + ']');\n            } else {\n              throw new Error('unrecognized escape in date format string [%' + c + ']');\n            }\n          } else {\n            sb += c;\n          }\n        }\n\n        return sb;\n      },\n      func, process, ret = {},\n      now_and_today = function(rt, resetTime) {\n        return _dateForReturnType(ret._now(resetTime), rt);\n      };\n\n  func = {\n    abs: function(r) { return XPR.number(Math.abs(r.v)); },\n    acos: function(r) { return XPR.number(Math.acos(r.v)); },\n    asin: function(r) { return XPR.number(Math.asin(r.v)); },\n    atan: function(r) { return XPR.number(Math.atan(r.v)); },\n    atan2: function(r) {\n      if(arguments.length>1) {\n        var y = arguments[0].v;\n        var x = arguments[1].v;\n        return XPR.number(Math.atan2(y, x));\n      }\n      return XPR.number(Math.atan2(r.v));\n    },\n    'boolean-from-string': function(r) {\n      if(r.t === 'num' && r.v > 0 && !r.decimal) {\n        return XPR.boolean(true);\n      }\n      const string = _str(r);\n      return XPR.boolean(string === '1' || string === 'true');\n    },\n    area: function(r) {\n      if(arguments.length === 0) throw TOO_FEW_ARGS;\n      return areaOrDistance(XPR.number, area, r);\n\t\t},\n    checklist: function(min, max) {\n      var i, j, trues = 0;\n      min = min.v;\n      max = max.v;\n      for (i=2;i < arguments.length;i++) {\n        var arg = arguments[i];\n        if (arg.t === 'bool' && Boolean(arg.v)) {\n          trues++;\n        } else if (arg.t === 'arr') {\n          for(j=0;j<arg.v.length;j++) {\n            if(arg.v[j]) trues++;\n          }\n        }\n      }\n      return XPR.boolean((min < 0 || trues >= min) && (max < 0 || trues <= max));\n    },\n    coalesce: function(a, b) { return XPR.string(_str(a) || _str(b)); },\n    concat: function() {\n      var out = [];\n      for (var j = 0; j < arguments.length; j++){\n        if(arguments[j].t === 'arr') {\n          out.push(arguments[j].v.join(''));\n        } else {\n          out.push(arguments[j].v);\n        }\n      }\n      return XPR.string(out.join(''));\n    },\n    cos: function(r) { return XPR.number(Math.cos(r.v)); },\n    'count-non-empty': function(r) {\n      if(arguments.length === 0 || r.t !== 'arr') throw TOO_FEW_ARGS;\n      var counter = 0;\n      for (var j = 0; j < r.v.length; j++){\n        counter += r.v[j] === '' ? 0 : 1;\n      }\n      return XPR.number(counter);\n    },\n    'count-selected': function(s) {\n      var parts = _str(s).split(' '),\n          i = parts.length,\n          count = 0;\n      while(--i >= 0) if(parts[i].length) ++count;\n      return XPR.number(count);\n    },\n    date: function(it, rt) {\n      it = _date(it);\n      return _dateForReturnType(it, rt);\n    },\n    'decimal-date': function(date) {\n      if(arguments.length > 1) throw TOO_MANY_ARGS;\n      var res = Date.parse(_str(date)) / MILLIS_PER_DAY;\n      return XPR.number(res);\n    },\n    'decimal-time': function(r) {\n      if(arguments.length > 1) throw TOO_MANY_ARGS;\n      if(r.t === 'num') return XPR.number(NaN);\n      var time = r.v;\n      // There is no Time type, and so far we don't need it so we do all validation\n      // and conversion here, manually.\n      var\tm = time.match(/^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d\\d?\\d?)?(\\+|-)(\\d\\d):(\\d\\d)$/);\n      var dec;\n      if (m &&\n        m[1] < 24 && m[1] >= 0 &&\n        m[2] < 60 && m[2] >= 0 &&\n        m[3] < 60 && m[3] >= 0 &&\n        m[6] < 24 && m[6] >= 0 && // this could be tighter\n        m[7] < 60 && m[7] >= 0 // this is probably either 0 or 30\n      ) {\n        var pad2 = function(x) { return (x < 10) ? '0' + x : x; };\n        var today = new Date(); // use today to cater to daylight savings time.\n        var d = new Date(today.getFullYear() + '-' + pad2(today.getMonth() + 1) + '-' + pad2(today.getDate()) + 'T' + time);\n        if(d.toString() === 'Invalid Date'){\n          dec = NaN;\n        } else {\n          dec = (d.getSeconds()/3600 + d.getMinutes()/60 + d.getHours()) / 24;\n        }\n      } else {\n        dec = NaN;\n      }\n      return XPR.number(dec);\n    },\n    digest: function(msg, algo, encoding) {\n      return XPR.string(digest(msg, algo, encoding));\n    },\n    distance: function(r) {\n      if(arguments.length === 0) throw TOO_FEW_ARGS;\n      return areaOrDistance(XPR.number, distance, r);\n    },\n    exp: function(r) { return XPR.number(Math.exp(r.v)); },\n    exp10: function(r) { return XPR.number(Math.pow(10, r.v)); },\n    'false': function(rt) {\n      if(rt === XPathResult.NUMBER_TYPE) return XPR.number(0);\n      if(arguments.length>1) throw TOO_MANY_ARGS;\n      return XPR.boolean(false);\n    },\n    'format-date': function(date, format) {\n      return XPR.string(format_date(date, format)); },\n    'if': function(con, a, b) {\n      if(con.t === 'bool') return XPR.string(con.v ? a.v : b.v);\n      if(con.t === 'arr') {\n        var exists = con.v.length && con.v[0] !== null;\n        return XPR.string(exists ? a.v : b.v);\n      }\n      return XPR.string(b.v);\n    },\n    'ends-with': function(a, b) {\n      if(arguments.length > 2) throw TOO_MANY_ARGS;\n      if(arguments.length < 2) throw TOO_FEW_ARGS;\n      return XPR.boolean(a.v.endsWith(b.v));\n    },\n    int: function(v) {\n      if(v.t === 'str' && v.v.indexOf('e-')>0) return XPR.number(NaN);\n      v = _str(v);\n      if(v.indexOf('e-')>0) return XPR.number(0);\n      return XPR.number(parseInt(v, 10));\n    },\n    join: function() {\n      var delim = arguments[0];\n      if(arguments.length<2) return XPR.string('');\n      if(arguments.length>2) {\n        var out = [];\n        for (var i = 1; i < arguments.length; i++){\n          out.push(arguments[i].v);\n        }\n        return XPR.string(out.join(_str(delim)));\n      }\n      return XPR.string(arguments[1].v.join(_str(delim)));\n    },\n    log: function(r) { return XPR.number(Math.log(r.v)); },\n    log10: function(r) { return XPR.number(Math.log10(r.v)); },\n    max: function() {\n      if(arguments.length > 1) {\n        var out = [];\n        for (var j = 0; j < arguments.length; j++){\n          out.push(arguments[j].v);\n        }\n        return XPR.number(Math.max.apply(null, out));\n      }\n      var max, i;\n      var r = arguments[0].v;\n      if(!(i=r.length)) return XPR.number(NaN);\n      max = parseFloat(r[0]);\n      while(--i) max = Math.max(max, parseFloat(r[i]));\n      return XPR.number(max);\n    },\n    min: function() {\n      if(arguments.length > 1) {\n        var out = [];\n        for (var j = 0; j < arguments.length; j++){\n          out.push(arguments[j].v);\n        }\n        return XPR.number(Math.min.apply(null, out));\n      }\n      var min, i;\n      var r = arguments[0].v;\n      if(!(i=r.length)) return XPR.number(NaN);\n      min = parseFloat(r[0]);\n      while(--i) min = Math.min(min, parseFloat(r[i]));\n      return XPR.number(min);\n    },\n    /*\n     * As per https://github.com/alxndrsn/openrosa-xpath-evaluator/issues/15,\n     * the pass-through to the wrapped implementation always requests\n     * XPathResult.STRING_TYPE.  This seems to cause an issue with the response\n     * from `not()` calls, which should ideally be handled by the built-in\n     * XPath implementation.  The following method is supplied as a workaround,\n     * and ideally would be unnecessary.\n     */\n    not: function(r) {\n      if(arguments.length === 0) throw TOO_FEW_ARGS;\n      if(arguments.length > 1) throw TOO_MANY_ARGS;\n      return XPR.boolean(!r.v);\n    },\n    now: function(rt) {\n      return now_and_today(rt);\n    },\n    today: function(rt) {\n      var r = now_and_today(rt, !config.returnCurrentTimeForToday);\n      if(rt === XPathResult.STRING_TYPE && !config.includeTimeForTodayString) {\n        r.v = r.v.split('T')[0];\n      }\n      return r;\n    },\n    /**\n     * The once function returns the value of the parameter if its own value\n     * is not empty, NaN, [Infinity or -Infinity]. The naming is therefore misleading!\n     * Also note that the parameter expr is always evaluated.\n     * This function simply decides whether to return the new result or the old value.\n     */\n    once: function(node, r) {\n      if(node.v.length && node.v[0].length) {\n        return XPR.string(node.v[0]);\n      }\n      if(r.v == Infinity) return XPR.string('');\n      if(r.t === 'num' && r.v === 0) return XPR.string('');\n      return XPR.string(r.v);\n    },\n    pi: function() { return XPR.number(Math.PI); },\n    position: function(r) {\n      var position = 1;\n      if(r) {\n        var node = r.iterateNext();\n        var nodeName = node.tagName;\n        while (node.previousElementSibling && node.previousElementSibling.tagName === nodeName) {\n          node = node.previousElementSibling;\n          position++;\n        }\n      }\n      return XPR.number(position);\n    },\n    pow: function(x, y) { return XPR.number(Math.pow(_float(x), _float(y))); },\n    random: function() { return XPR.number(Math.random()); },\n    randomize: function(r) {\n      if(arguments.length === 1) throw TOO_FEW_ARGS;//only rT passed\n      if(arguments.length > 3) throw TOO_MANY_ARGS;\n\n      var seed = arguments.length > 2 ? arguments[1] : arguments[2];\n      var rt = arguments[arguments.length - 1];\n\n      if(rt === XPathResult.BOOLEAN_TYPE) {\n        return XPR.boolean(r.v.length > 0 ? true : false);\n      }\n      if(rt === XPathResult.STRING_TYPE) {\n        if (r.v.length < 1) return '';\n        return XPR.string(r.v[0]);\n      }\n      // nodes as seed\n      if(Array.isArray(seed) && seed.length && seed[0].nodeType === 1) {\n        return [r, parseInt(seed[0].textContent)];\n      }\n      return [r, seed && seed.v];\n    },\n    regex: function(haystack, pattern) {\n        return XPR.boolean(new RegExp(_str(pattern)).test(_str(haystack))); },\n    round: function(number, num_digits) {\n      if(arguments.length === 0) throw TOO_FEW_ARGS;\n      if(arguments.length > 2) throw TOO_MANY_ARGS;\n      number = _float(number);\n      if(!num_digits) {\n        return XPR.number(_round(number));\n      }\n      num_digits = _int(num_digits);\n      var pow = Math.pow(10, Math.abs(num_digits));\n      if(num_digits > 0) {\n        return XPR.number(_round(number * pow) / pow);\n      } else {\n        return XPR.number(pow * _round(number / pow));\n      }\n    },\n    selected: function(haystack, needle) {\n      return XPR.boolean(_str(haystack).split(' ').indexOf(_str(needle).trim()) !== -1);\n    },\n    'selected-at': function(list, index) {\n      if(!index) throw new Error(JSON.stringify(list));\n      return XPR.string(_str(list).split(' ')[_int(index)] || '');\n    },\n    sin: function(r) { return XPR.number(Math.sin(r.v)); },\n    sqrt: function(r) { return XPR.number(Math.sqrt(r.v)); },\n    substr: function(string, startIndex, endIndex) {\n      return XPR.string(_str(string).slice(\n          _int(startIndex),\n          endIndex && _int(endIndex)));\n    },\n    sum: function(r) {\n      if(arguments.length > 1) throw TOO_MANY_ARGS;\n      var out = 0;\n      for (var i = 0; i < r.v.length; i++) {\n        if(!RAW_NUMBER.test(r.v[i])) XPR.number(NaN);\n        out += parseInt(r.v[i], 10);\n      }\n      return XPR.number(out);\n    },\n    tan: function(r) { return XPR.number(Math.tan(r.v)); },\n    'true': function(rt) {\n      if(rt === XPathResult.NUMBER_TYPE) return XPR.number(1);\n      if(arguments.length>1) throw TOO_MANY_ARGS;\n      return XPR.boolean(true);\n    },\n    uuid: function(r) {\n      if(r && r.v) return XPR.string(randomToken(r.v));\n      return XPR.string(uuid());\n    },\n    'weighted-checklist': function(min, max) {\n      var i, values = [], weights = [], weightedTrues = 0;\n      min = min.v;\n      max = max.v;\n      for (i=2 ; i < arguments.length ; i=i+2) {\n        var v = arguments[i];\n        var w = arguments[i+1];\n        if (v && w) {\n          // value or weight might be a nodeset\n          values.push(v.t === 'arr' ? v.v[0] : v.v);\n          weights.push(w.t === 'arr' ? w.v[0] : w.v);\n        }\n      }\n\n      for(i=0; i < values.length; i++) {\n        if(values[i]) {\n          weightedTrues += weights[i];\n        }\n      }\n      return XPR.boolean((min < 0 || weightedTrues >= min) && (max < 0 || weightedTrues <= max));\n    }\n  };\n\n  // function aliases\n  func['date-time'] = func.date;\n  func['decimal-date-time'] = func['decimal-date'];\n  func['format-date-time'] = func['format-date'];\n\n  process = {\n      toExternalResult: function(r) {\n        if(r.t === 'date') return {\n          resultType:XPathResult.STRING_TYPE,\n          // TODO a bit naughty, but we return both a string and number value\n          // for dates.  We should actually know from where the xpath evaluator\n          // was initially called whether we expect a STRING_TYPE or NUMBER_TYPE\n          // result, but we should get away with it because:\n          //   1. this setup makes testing easy\n          //   2. dates should never leak outside openrosa functionality anyway\n          numberValue:r.v.getTime(),\n          stringValue:_dateToString(r.v),\n        };\n      },\n      typefor: function(val) {\n        if(val instanceof Date) return 'date';\n      },\n      handleInfix: function(err, lhs, op, rhs) {\n        if(lhs.t === 'date' || rhs.t === 'date') {\n          // For comparisons, we must make sure that both values are numbers\n          // Dates would be fine, except for equality!\n          if( op.v === '=' ||\n              op.v === '<' ||\n              op.v === '>' ||\n              op.v === '<=' ||\n              op.v === '>=' ||\n              op.v === '!=') {\n            if(lhs.t === 'arr' || lhs.t === 'str') lhs = date(lhs);\n            if(rhs.t === 'arr' || rhs.t === 'str') rhs = date(rhs);\n            if(lhs.t !== 'date' || rhs.t !== 'date') {\n              return op.v === '!=';\n            } else {\n              lhs = { t:'num', v:lhs.v.getTime() };\n              rhs = { t:'num', v:rhs.v.getTime() };\n            }\n          } else if(op.v === '+' || op.v === '-') {\n            // for math operators, we need to do it ourselves\n            if(lhs.t === 'date' && rhs.t === 'date') err();\n            var d = lhs.t === 'date'? lhs.v: rhs.v,\n                n = lhs.t !== 'date'? _int(lhs): _int(rhs),\n                res = new Date(d.getTime());\n            if(op.v === '-') n = -n;\n            res.setDate(d.getDate() + n);\n            return res;\n          }\n          return { t:'continue', lhs:lhs, op:op, rhs:rhs };\n        }\n      },\n  };\n\n  ret.func = func;\n  ret.process = process;\n  ret.XPR = XPR;\n  ret._now = function(resetTime) {\n    var t = new Date();\n    if(resetTime) {\n      return new Date(t.getFullYear(), t.getMonth(), t.getDate());\n    }\n    return t;\n  };\n  ret.customXPathFunction = {\n    type: {\n      StringType: XPR.string,\n      NumberType: XPR.number,\n      BooleanType: XPR.boolean,\n      DateType: XPR.date\n    },\n    add: function(name, fnObj) {\n      func[name] = fnObj;\n    },\n    remove: function(name) {\n      delete func[name];\n    },\n    all: function() {\n      return func;\n    }\n  };\n\n  return ret;\n};\n\nmodule.exports = openrosa_xpath_extensions;\n","var EARTH_EQUATORIAL_RADIUS_METERS = 6378100;\nvar PRECISION = 100;\n\nfunction _toLatLngs(geopoints) {\n  return geopoints.map(function (geopoint) {\n    return geopoint.trim().split(' ');\n  });\n}\n\n// converts degrees to radians\nfunction _toRadians(angle) {\n  return angle * Math.PI / 180;\n}\n\n// check if all geopoints are valid (copied from Enketo FormModel)\nfunction _latLngsValid(latLngs) {\n  return latLngs.every(function (coords) {\n    return (\n      (coords[0] !== '' && coords[0] >= -90 && coords[0] <= 90) &&\n      (coords[1] !== '' && coords[1] >= -180 && coords[1] <= 180) &&\n      (typeof coords[2] == 'undefined' || !isNaN(coords[2])) &&\n      (typeof coords[3] == 'undefined' || (!isNaN(coords[3]) && coords[3] >= 0))\n    );\n  });\n}\n\n/**\n * Adapted from https://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {{lat:number, lng: number}} p1\n * @param {{lat:number, lng: number}} p2\n * @returns {number}\n */\nfunction _distanceBetween(p1,p2) {\n  var Δλ = _toRadians(p1.lng - p2.lng);\n  var φ1 = _toRadians(p1.lat);\n  var φ2 = _toRadians(p2.lat);\n  return Math.acos(Math.sin(φ1) * Math.sin(φ2) + Math.cos(φ1) * Math.cos(φ2) * Math.cos(Δλ)) * EARTH_EQUATORIAL_RADIUS_METERS;\n}\n\nfunction areaOrDistance(xpr, fn, r) {\n  var geopoints = [];\n  if(r.t === 'str') geopoints = r.v.split(';');\n  if(r.t === 'arr') {\n    if(r.v.length === 1) geopoints = r.v[0].split(';');\n    else geopoints = r.v;\n  }\n  return xpr(fn(geopoints));\n}\n\n/**\n * Adapted from https://github.com/Leaflet/Leaflet.draw/blob/3cba37065ea5be28f42efe9cc47836c9e3f5db8c/src/ext/GeometryUtil.js#L3-L20\n */\nfunction area(geopoints) {\n  var latLngs = _toLatLngs(geopoints);\n\n  if (!_latLngsValid(latLngs)) {\n    return Number.NaN;\n  }\n\n  var pointsCount = latLngs.length;\n  var area = 0.0;\n\n  if (pointsCount > 2) {\n    for (var i = 0; i < pointsCount; i++) {\n      var p1 = {\n        lat: latLngs[i][0],\n        lng: latLngs[i][1]\n      };\n      var p2 = {\n        lat: latLngs[(i + 1) % pointsCount][0],\n        lng: latLngs[(i + 1) % pointsCount][1]\n      };\n      area += _toRadians(p2.lng - p1.lng) *\n          (2 + Math.sin(_toRadians(p1.lat)) + Math.sin(_toRadians(p2.lat)));\n    }\n    area = area * EARTH_EQUATORIAL_RADIUS_METERS * EARTH_EQUATORIAL_RADIUS_METERS / 2.0;\n  }\n  return Math.abs(Math.round(area * PRECISION)) / PRECISION;\n}\n\n/**\n * @param {any} geopoints\n * @returns\n */\nfunction distance(geopoints) {\n  var latLngs = _toLatLngs(geopoints);\n\n  if (!_latLngsValid(latLngs)) {\n    return Number.NaN;\n  }\n\n  var pointsCount = latLngs.length;\n  var distance = 0.0;\n\n  if (pointsCount > 1) {\n    for (var i = 1; i < pointsCount; i++) {\n      var p1 = {\n        lat: latLngs[i - 1][0],\n        lng: latLngs[i - 1][1]\n      };\n      var p2 = {\n        lat: latLngs[i][0],\n        lng: latLngs[i][1]\n      };\n\n      distance += _distanceBetween(p1, p2);\n    }\n  }\n\n  return Math.abs(Math.round(distance * PRECISION)) / PRECISION;\n}\n\nmodule.exports = {\n  area,\n  areaOrDistance,\n  distance\n};\n","const forge = require('node-forge');\n\nconst digest = (message, algo, encoding) => {\n  message = message.v;\n  algo = algo && algo.v && algo.v.toLowerCase();\n  encoding = (encoding && encoding.v && encoding.v.toLowerCase()) || 'base64';\n  if(!algo || !/^(md5|sha-1|sha-256|sha-384|sha-512)$/.test(algo)) {\n    throw new Error('Invalid algo.');\n  }\n  if(!/^(base64|hex)$/.test(encoding)) {\n    throw new Error('Invalid encoding.');\n  }\n  const md = forge.md[algo.replace('-', '')].create();\n  md.update(message);\n  const hashBuffer = md.digest();\n  if(!encoding || encoding === 'base64') {\n    return forge.util.encode64(hashBuffer.bytes());\n  }\n  return md.digest().toHex();\n};\n\nmodule.exports = {\n  digest\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","function _random13chars() {\n  return Math.random().toString(16).substring(2);\n}\n\nfunction randomToken(length) {\n\tvar loops = Math.ceil(length / 13);\n\treturn new Array(loops)\n    .fill(_random13chars)\n    .reduce((string, func) => {\n      return string + func();\n    }, '').substring(0, length);\n}\n\nmodule.exports = {\n  randomToken\n};\n"],"sourceRoot":""}